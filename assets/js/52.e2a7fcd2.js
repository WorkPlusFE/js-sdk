(window.webpackJsonp=window.webpackJsonp||[]).push([[52],{548:function(t,s,a){"use strict";a.r(s);var e=a(37),r=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"单点登录"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#单点登录"}},[t._v("#")]),t._v(" 单点登录")]),t._v(" "),a("p",[t._v("第三方应用在接入 WorkPlus 平台时，往往需要和 WorkPlus 用户系统集成。")]),t._v(" "),a("p",[t._v("目前 WorkPlus 实现单点登录的机制如下：")]),t._v(" "),a("ol",[a("li",[t._v("客户端打开第三方应用时，第三方应用可以通过"),a("code",[t._v("js-sdk")]),t._v("或从"),a("code",[t._v("url")]),t._v("上获得临时 Ticket；")]),t._v(" "),a("li",[t._v("第三方应用根据 Ticket 参数，验证该 Ticket，如该 Ticket 有效，则返回关联的用户信息。")])]),t._v(" "),a("p",[t._v("具体接口使用说明，请查看"),a("RouterLink",{attrs:{to:"/api/auth.html"}},[t._v("API文档-单点登录")]),t._v("。")],1),t._v(" "),a("h2",{attrs:{id:"获取用户信息"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#获取用户信息"}},[t._v("#")]),t._v(" 获取用户信息")]),t._v(" "),a("p",[t._v("不同的端，获取用户信息的方式会不太一样。")]),t._v(" "),a("h3",{attrs:{id:"移动端"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#移动端"}},[t._v("#")]),t._v(" 移动端")]),t._v(" "),a("p",[t._v("移动端通常会通过"),a("code",[t._v("js-sdk")]),t._v("接口进行获取，例如使用"),a("code",[t._v("w6s.auth.getUserTicket")]),t._v("及"),a("code",[t._v("w6s.contact.getCurrentUserInfo")]),t._v("方法来获取临时 Ticket 及当前登录的用户信息。")]),t._v(" "),a("p",[t._v("另一种方式，就是通过截取应用启动地址上的参数，具体设置请查看"),a("RouterLink",{attrs:{to:"/light-app/create.html#启动地址"}},[t._v("应用启动地址")]),t._v("。")],1),t._v(" "),a("h3",{attrs:{id:"pc-客户端"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#pc-客户端"}},[t._v("#")]),t._v(" PC 客户端")]),t._v(" "),a("p",[t._v("PC 客户端目前主要的方式就是截取应用启动地址上的参数，每个应用被打开时，客户端会获取临时 Ticket 及用户信息并拼接在应用启动地址上，如下：")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("http"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("test"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("app"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("workplus"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("io"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v("ticket"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("ticket"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("user_id"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("xxx"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("domain_id"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("xx\n")])])]),a("p",[t._v("参数包括以下属性:")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("ticket")]),t._v(" 临时 Ticket")]),t._v(" "),a("li",[a("code",[t._v("username")]),t._v(" 用户名")]),t._v(" "),a("li",[a("code",[t._v("user_id")]),t._v(" 用户的 userId")]),t._v(" "),a("li",[a("code",[t._v("domain_id")]),t._v(" 用户当前所在的域")]),t._v(" "),a("li",[a("code",[t._v("org_id")]),t._v(" 用户当前所在的组织")]),t._v(" "),a("li",[a("code",[t._v("nickname")]),t._v(" 用户的昵称，注意转码")]),t._v(" "),a("li",[a("code",[t._v("random")]),t._v(" 随机数，一般为时间戳")])]),t._v(" "),a("h2",{attrs:{id:"流程解析"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#流程解析"}},[t._v("#")]),t._v(" 流程解析")]),t._v(" "),a("p",{staticClass:"w6s-image"},[a("img",{attrs:{src:t.$withBase("/app/sso.png"),alt:"单点登录流程解析",width:"100%"}})])])}),[],!1,null,null,null);s.default=r.exports}}]);