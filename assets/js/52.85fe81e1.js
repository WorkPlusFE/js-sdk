(window.webpackJsonp=window.webpackJsonp||[]).push([[52],{548:function(t,a,s){"use strict";s.r(a);var e=s(37),r=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"单点登录"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#单点登录"}},[t._v("#")]),t._v(" 单点登录")]),t._v(" "),s("p",[t._v("第三方应用在接入 WorkPlus 平台时，往往需要和 WorkPlus 用户系统集成。")]),t._v(" "),s("p",[t._v("目前 WorkPlus 实现单点登录的机制如下：")]),t._v(" "),s("ol",[s("li",[t._v("客户端打开第三方应用时，先以当前登录用户生成用户 Ticket，之后在跳转时会带上该 Ticket 参数；")]),t._v(" "),s("li",[t._v("第三方应用根据 Ticket 参数，验证该 Ticket，如该 Ticket 有效，会返回关联的用户信息。")])]),t._v(" "),s("p",[t._v("具体接口使用说明，请查看"),s("RouterLink",{attrs:{to:"/api/auth.html"}},[t._v("单点登录")]),t._v("。")],1),t._v(" "),s("h2",{attrs:{id:"获取用户信息"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#获取用户信息"}},[t._v("#")]),t._v(" 获取用户信息")]),t._v(" "),s("p",[t._v("不同的端，获取用户信息的方式会不太一样。")]),t._v(" "),s("h3",{attrs:{id:"移动端"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#移动端"}},[t._v("#")]),t._v(" 移动端")]),t._v(" "),s("p",[t._v("移动端通常会通过"),s("code",[t._v("js-sdk")]),t._v("接口进行获取，例如使用"),s("code",[t._v("w6s.auth.getUserTicket")]),t._v("及"),s("code",[t._v("w6s.contact.getCurrentUserInfo")]),t._v("方法来获取临时 Ticket 及当前登录的用户信息。")]),t._v(" "),s("p",[t._v("另一种方式，就是通过截取应用启动地址上的参数，具体设置请查看"),s("RouterLink",{attrs:{to:"/light-app/create.html#启动地址"}},[t._v("应用启动地址")]),t._v("。")],1),t._v(" "),s("h3",{attrs:{id:"pc-客户端"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#pc-客户端"}},[t._v("#")]),t._v(" PC 客户端")]),t._v(" "),s("p",[t._v("PC 客户端目前主要的方式就是截取应用启动地址上的参数，每个应用被打开时，客户端会获取临时 Ticket 及用户信息并拼接在应用启动地址上，如下：")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("http"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("test"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("app"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("workplus"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("io"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v("ticket"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("ticket"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("user_id"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("xxx"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("domain_id"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("xx\n")])])]),s("p",[t._v("参数包括以下属性:")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("ticket")]),t._v(" 临时 Ticket")]),t._v(" "),s("li",[s("code",[t._v("username")]),t._v(" 用户名")]),t._v(" "),s("li",[s("code",[t._v("user_id")]),t._v(" 用户的 userId")]),t._v(" "),s("li",[s("code",[t._v("domain_id")]),t._v(" 用户当前所在的域")]),t._v(" "),s("li",[s("code",[t._v("org_id")]),t._v(" 用户当前所在的组织")]),t._v(" "),s("li",[s("code",[t._v("nickname")]),t._v(" 用户的昵称，注意转码")]),t._v(" "),s("li",[s("code",[t._v("random")]),t._v(" 随机数，一般为时间戳")])]),t._v(" "),s("h2",{attrs:{id:"流程解析"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#流程解析"}},[t._v("#")]),t._v(" 流程解析")]),t._v(" "),s("p",{staticClass:"w6s-image"},[s("img",{attrs:{src:t.$withBase("/app/sso.png"),alt:"单点登录流程解析",width:"100%"}})])])}),[],!1,null,null,null);a.default=r.exports}}]);