/*!
 * @w6s/sdk.js v0.0.1
 * (c) 2019 WorkPlusFE
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).WorkPlus={})}(this,function(t){"use strict";var e=(Object.defineProperty(o.prototype,"_fullPrefix",{get:function(){return this._prefix+":"},enumerable:!0,configurable:!0}),o.prototype._getFullKey=function(t){return this._fullPrefix+t},o.prototype.get=function(t){var e,o=this._getFullKey(t),r=null!=(e=this._storage.getItem(o))?e:"";if(!this.hasKey(o))throw Error("不存在的 key");return JSON.parse(r)},o.prototype.hasKey=function(t){for(var e,o=this._storage,r=!1,i=0;i<o.length;i++){var n=null!=(e=o.key(i))?e:"";n&&n===t&&(r=!0)}return r},o.prototype.add=function(t,e){var o,r=this._getFullKey(t),i=e;if("[object Array]"===Object.prototype.toString.call(e)||"[object Object]"===Object.prototype.toString.call(e))i=JSON.stringify(e);else if(null!==(o=e)&&("object"==typeof o||"function"==typeof o))throw Error("storage 不支持的数据类型");try{this._storage.setItem(r,i)}catch(t){throw Error("storage 添加失败")}},o.prototype.remove=function(t){var e,o=this._getFullKey(t);null===(e=this._storage)||void 0===e||e.removeItem(o)},o.prototype.clear=function(){var o=this;this.forEach(function(t,e){return o.remove(t)})},o.prototype.count=function(){for(var t,e=this._storage,o=this._fullPrefix,r=0,i=0;i<e.length;i++)(null!=(t=e.key(i))?t:"").indexOf(o)||r++;return r},o.prototype.forEach=function(t){for(var e,o=this._storage,r=this._fullPrefix,i=0;i<o.length;i++){var n=null!=(e=o.key(i))?e:"";n.indexOf(r)||t(n,this.get(n))}},o);function o(t){var e,o;if(this._prefix="workplus",this._connector=".",!((null===(e=window)||void 0===e?void 0:e.localStorage)&&(null===(o=window)||void 0===o?void 0:o.sessionStorage)))throw Error("当前环境不支持 storage.");this._prefix=t.prefix||this._prefix,this._connector=t.connector||this._connector,this._storage=window[t.type]}t.Storage=e,t.native={},t.version="0.0.1",Object.defineProperty(t,"__esModule",{value:!0})});
