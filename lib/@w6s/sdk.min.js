/*!
 * @w6s/sdk.js v0.0.1
 * (c) 2019 WorkPlusFE
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).WorkPlus={})}(this,function(t){"use strict";function n(t){return null===t||"object"!=typeof t&&"function"!=typeof t}function i(t){return"[object Object]"===Object.prototype.toString.call(t)}function u(t){return"[object Array]"===Object.prototype.toString.call(t)}var e=(Object.defineProperty(r.prototype,"_fullPrefix",{get:function(){return this._prefix+":"},enumerable:!0,configurable:!0}),r.prototype._getFullKey=function(t){return this._fullPrefix+t},r.prototype.get=function(t){var e,r=this._getFullKey(t),o=null!=(e=this._storage.getItem(r))?e:"";if(!this.hasKey(r))throw Error("不存在的 key");return JSON.parse(o)},r.prototype.hasKey=function(t){for(var e,r=this._storage,o=!1,n=0;n<r.length;n++){var i=null!=(e=r.key(n))?e:"";i&&i===t&&(o=!0)}return o},r.prototype.add=function(t,e){var r=this._getFullKey(t),o=e;if(u(e)||i(e))o=JSON.stringify(e);else if(!n(e))throw Error("storage 不支持的数据类型");try{this._storage.setItem(r,o)}catch(t){throw Error("storage 添加失败")}},r.prototype.remove=function(t){var e,r=this._getFullKey(t);null===(e=this._storage)||void 0===e||e.removeItem(r)},r.prototype.clear=function(){var r=this;this.forEach(function(t,e){return r.remove(t)})},r.prototype.count=function(){for(var t,e=this._storage,r=this._fullPrefix,o=0,n=0;n<e.length;n++)(null!=(t=e.key(n))?t:"").indexOf(r)||o++;return o},r.prototype.forEach=function(t){for(var e,r=this._storage,o=this._fullPrefix,n=0;n<r.length;n++){var i=null!=(e=r.key(n))?e:"";i.indexOf(o)||t(i,this.get(i))}},r);function r(t){var e,r;if(this._prefix="workplus",this._connector=".",!((null===(e=window)||void 0===e?void 0:e.localStorage)&&(null===(r=window)||void 0===r?void 0:r.sessionStorage)))throw Error("当前环境不支持 storage.");this._prefix=t.prefix||this._prefix,this._connector=t.connector||this._connector,this._storage=window[t.type]}var o=Object.freeze({__proto__:null,sleep:function(e){return new Promise(function(t){setTimeout(function(){return t()},e)})},isString:function(t){return"[object String]"===Object.prototype.toString.call(t)},isPrimitive:n,isPlainObject:i,isArray:u});t.Storage=e,t.native={},t.utils=o,t.version="0.0.1",Object.defineProperty(t,"__esModule",{value:!0})});
