/*!
 * @w6s/sdk.js v1.0.0-alpha.6
 * (c) 2020 WorkPlusFE
 */
!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((e=e||self).WorkPlus={})}(this,function(e){"use strict";function t(){var e;return null!==(e=null===window||void 0===window?void 0:window.navigator)&&void 0!==e&&e.userAgent.includes("workplus")}function i(){var e;return null!==(e=null===window||void 0===window?void 0:window.navigator)&&void 0!==e&&e.userAgent.includes("android")}function o(){var e;return null!==(e=null===window||void 0===window?void 0:window.navigator)&&void 0!==e&&e.userAgent.includes("iPhone")}function f(e){return"[object Function]"===Object.prototype.toString.call(e)}function n(e){return!!~e.indexOf("android")}var r=function(){return!!~navigator.userAgent.indexOf("workplus")},l=function(e){var n=document.createElement("script");n.setAttribute("type","text/javascript"),n.setAttribute("src",e),document.getElementsByTagName("head")[0].appendChild(n)},u=function(){return(u=Object.assign||function(e){for(var n,t=1,o=arguments.length;t<o;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e}).apply(this,arguments)};function s(e,n){var t={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&!~n.indexOf(o)&&(t[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,o=Object.getOwnPropertySymbols(e);i<o.length;i++)!~n.indexOf(o[i])&&Object.prototype.propertyIsEnumerable.call(e,o[i])&&(t[o[i]]=e[o[i]]);return t}var c={cordovajs:{local:"applocal://cordova.min.js",iOS:"",android:""},useHttp:!1,pcSDKUri:""},a=(Object.defineProperty(d.prototype,"userAgent",{get:function(){return window.navigator.userAgent.toLowerCase()},enumerable:!1,configurable:!0}),d.prototype.getImportUri=function(){var e=this.getCurrentPlatformByUserAgent();if(this.mustUseHttpModel()||this.config.useHttp){var n=this.config.cordovajs[e];if(n||"development"!==process.env.NODE_ENV||console.warn("当前应用环境适合使 http(s):// 方式加载 cordova.js，请设置对应平台的 cordova.js 访问地址！"),n)return n}return this.config.cordovajs.local},d.prototype.mustUseHttpModel=function(){return!(!self.frameElement||"IFRAME"!=self.frameElement.tagName)||!("https:"!==window.location.protocol||!n(this.userAgent))},d.prototype.getCurrentPlatformByUserAgent=function(){return~this.userAgent.indexOf("iphone")?"iOS":n(this.userAgent)?"android":"local"},d);function d(e,n){this.config=Object.assign(JSON.parse(JSON.stringify(c)),{cordovajs:u(u({},e),{local:c.cordovajs.local}),useHttp:n})}var v=(g.prototype.disable=function(){this._enabled=!1},g.prototype.enable=function(){this._enabled=!0},g.prototype.log=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._enabled&&console.log(this._PREFIX+"[Log]: "+e.join(" "))},g.prototype.warn=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._enabled&&console.warn(this._PREFIX+"[Warn]: "+e.join(" "))},g.prototype.error=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._enabled&&console.error(this._PREFIX+"[Error]: "+e.join(" "))},g);function g(e){void 0===e&&(e=!1),this._PREFIX="WorkPlus SDK ",this._enabled=e}var p="WorkPlus_Image",_="WorkPlus_Contact",m="WorkPlus_Auth",h="WorkPlus_WebView",w="WorkPlus_Email",y="WorkPlus_DeviceInfo",b="WorkPlus_Location",P="WorkPlus_EventLog",O="WorkPlus_Files",k="WorkPlus_NetInfo",L="WorkPlus_BarcodeScanner",S="WorkPlus_LightApp",I="WorkPlus_PublicClound",W="WorkPlus_AppStore",E=Object.freeze({__proto__:null,WORKPLUS_IMAGE:p,WORKPLUS_CONTACT:_,WORKPLUS_AUTH:m,WORKPLUS_WEBVIEW:h,WORKPLUS_EMAIL:w,WORKPLUS_PAY:"Workplus_Pay",WORKPLUS_SCAN:"WorkPlus_BarcodeScanner",WORKPLUS_DEVICE:y,WORKPLUS_LOCATION:b,WORKPLUS_EVENTLOG:P,WORKPLUS_FILE:O,WORKPLUS_NETWORK:k,WORKPLUS_BARCODE_SCANNER:L,WORKPLUS_LIGHT_APP:S,WORKPLUS_PUBLIC_CLOUND:I,WORKPLUS_APP_STORE:W}),C={},A=E;Object.keys(A).map(function(e){var n;e.includes("WORKPLUS_")&&(n=e.replace("WORKPLUS_","").toLocaleLowerCase(),C[A[e]]=n)});function U(){var o=this;this._ready=!1,this._logger=new v,this._timeout=5e3,this._mock=!1,this._mockData=Object.create(null),this.init=function(e){if(o._logger||(o._logger=new v),null!=e&&e.debug&&(o._logger.enable(),o._logger.warn("当前 SDK 已开启调试模式")),"undefined"!=typeof window&&"[object Window]"===Object.prototype.toString.call(window)){if(window.cordova||o.isReday||function(e,n){try{if(!r())return;var t=new a(e,n).getImportUri();l(t)}catch(e){throw Error(e)}}(null==e?void 0:e.cordovajs,null==e?void 0:e.useHttp),o._timeout=(null==e?void 0:e.timeout)||5e3,o._logger.warn("当前 SDK 设置的超时时间为: "+o._timeout+"ms"),null!=e&&e.mock)o._mock=null==e?void 0:e.mock,null!=e&&e.mockData&&(o._mockData=null==e?void 0:e.mockData);else if(!t())return void o._logger.error("请在 WorkPlus APP 下打开页面")}else o._logger.error("SDK 不支持非浏览器环境")},this.ready=function(t){return new Promise(function(e){function n(){return t&&f(t)&&t()}o.isReday?(e(),n()):document.addEventListener("deviceready",function(){o._logger.warn("Cordova 注入成功"),o._setReady(!0),e(),n()},!1)})},this.error=function(e){f(e)?o._errorCallback=e:o._logger.error("错误监听回调仅支持函数参数")},this.init()}var j=new(U.prototype.onError=function(e){this._errorCallback&&f(this._errorCallback)&&this._errorCallback(e)},U.prototype._setReady=function(e){this._ready=e},Object.defineProperty(U.prototype,"isReday",{get:function(){return this._ready},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"logger",{get:function(){return this._logger},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"timeout",{get:function(){return this._timeout},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"mock",{get:function(){return this._mock},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"mockData",{get:function(){return this._mockData},enumerable:!1,configurable:!0}),U),R=j.init,B=j.ready,D=j.error,x=j.logger;function K(l,u,s,c,a,d){return void 0===d&&(d=!0),new Promise(function(n,t){function o(){e&&clearTimeout(e)}var i=l+"."+u,e=d?setTimeout(function(e){void 0===e&&(e="接口调用超时"),x.warn(i+" 接口调用响应超时，请重试"),a&&f(a)&&a(e),t(e)},j.timeout):0;try{if(j.mock){var r=function(n,t){var e=j.mockData[C[n]];if(e&&e[t]&&f(e[t])){var o=Object.create(null);x.warn("执行 "+n+"."+t+" Mock 调用");try{o=e[t](),x.warn("执行 "+n+"."+t+" Mock 返回结果: "+JSON.stringify(o,null,4))}catch(e){x.error("执行 "+n+"."+t+" Mock 发生错误: "+JSON.stringify(e,null,4))}return o}return!1}(l,u);if(r)return o(),void n(r)}j.ready(function(){x.warn("准备调用 "+i),cordova.exec(function(e){return o(),x.warn(i+" 调用成功: "+JSON.stringify(e,null,4)),c&&f(c)&&c(e),n(e)},function(e){return o(),x.error(i+" 接口调用失败"),j.onError(i+" 调用失败: "+e),a&&f(a)&&a(e),t(e)},l,u,s)})}catch(e){j.onError(e)}})}function F(n,t,e){x.warn("同步调用 "+(n+"."+t)),cordova.exec(function(e){x.warn(JSON.stringify(e,null,4))},function(e){x.error(JSON.stringify(e,null,4)),j.onError(n+"."+t+" 调用失败: "+e)},n,t,e)}function T(o){return new Promise(function(n,t){var e;i()&&(o="file://"+o),e=o,new Promise(function(n,t){window.resolveLocalFileSystemURL(e,function(e){n(e)},function(e){t(e)})}).then(function(e){e.file(function(e){n(e)},function(e){t(e)})}).catch(function(e){t(e)})})}function N(t){return new Promise(function(n){var e=new FileReader;e.onloadend=function(e){n(e)},e.readAsDataURL(t)})}var M={takePicture:function(e){var n=e.success,t=e.fail,o=s(e,["success","fail"]);return K(p,"takePicture",[o],n,t,!1)},takePhotoAndAddWaterMark:function(e){var n=e.success,t=e.fail,o=s(e,["success","fail"]);return K(p,"takePhotoAndAddWaterMark",[{content:o.content,font_size:o.fontSize,color:o.color,mark_disable:o.markDisable,time_enable:o.timeEnable,location_enable:o.locationEnable}],n,t,!1)},saveImages:function(e){return F(p,"showImages",[e])},showImages:function(e){return F(p,"showImages",[e])},chooseImages:function(e){var n,t,o,i=e.success,r=e.fail,l=s(e,["success","fail"]),u={multiple:l.multiple,imageKeys:l.imageKeys,file_limit:{max_select_count:(null===(n=l.fileLimit)||void 0===n?void 0:n.maxSelectCount)||9,single_select_size:(null===(t=l.fileLimit)||void 0===t?void 0:t.singleSelectSize)||-1,total_select_size:(null===(o=l.fileLimit)||void 0===o?void 0:o.totalSelectSize)||-1}};return K(p,"chooseImages",[u],i,r,!1)},actionForLongPressImage:function(e){return F(p,"actionForLongPressImage",[e])},cleanCompressImage:function(){return F(p,"cleanCompressImage",[])},toBase64:function(n){return T(n.filePath).then(N).then(function(e){return n.success&&f(n.success)&&n.success(e),Promise.resolve(e)}).catch(function(e){return n.fail&&f(n.fail)&&n.fail(e),Promise.reject(e)})}};var z=Object.freeze({__proto__:null,getSingleContact:function(e){var n;return K(_,"getContact",null!==(n=null==e?void 0:e.data)&&void 0!==n?n:[],null==e?void 0:e.success,null==e?void 0:e.fail)},getContacts:function(e){var n;return K(_,"getContacts",null!==(n=null==e?void 0:e.data)&&void 0!==n?n:[],null==e?void 0:e.success,null==e?void 0:e.fail)},getEmployeesFromCurrentOrg:function(e){var n;return K(_,"getEmployeesFromCurrentOrg",null!==(n=null==e?void 0:e.data)&&void 0!==n?n:[],null==e?void 0:e.success,null==e?void 0:e.fail)},selectContacts:function(e){var n;return K(_,"selectContacts",null!==(n=null==e?void 0:e.data)&&void 0!==n?n:[],null==e?void 0:e.success,null==e?void 0:e.fail)},getMobileContacts:function(e){var n;return K(_,"getMobileContacts",null!==(n=null==e?void 0:e.data)&&void 0!==n?n:[],null==e?void 0:e.success,null==e?void 0:e.fail)}});var V=Object.freeze({__proto__:null,getLocation:function(e){return K(b,"getLocation",[],null==e?void 0:e.success,null==e?void 0:e.fail)}});var H={getDeviceInfo:function(e){var n;return K(y,"getDeviceInfo",null!==(n=null==e?void 0:e.data)&&void 0!==n?n:[],null==e?void 0:e.success,null==e?void 0:e.fail)},getIpAddress:function(e){var n;return K(y,"getIpAddress",null!==(n=null==e?void 0:e.data)&&void 0!==n?n:[],null==e?void 0:e.success,null==e?void 0:e.fail)},getPedometerData:function(e){var n;return K(y,"getPedometerData",null!==(n=null==e?void 0:e.data)&&void 0!==n?n:[],null==e?void 0:e.success,null==e?void 0:e.fail)},getAppInfo:function(e){var n;return K(I,"getAppInfo",null!==(n=null==e?void 0:e.data)&&void 0!==n?n:[],null==e?void 0:e.success,null==e?void 0:e.fail)}};var J={getEventLogs:function(e){var n;return K(P,"getEventLogs",null!==(n=null==e?void 0:e.data)&&void 0!==n?n:[],null==e?void 0:e.success,null==e?void 0:e.fail)},getTodayUseDuration:function(e){var n;return K(P,"getTodayUseDuration",null!==(n=null==e?void 0:e.data)&&void 0!==n?n:[],null==e?void 0:e.success,null==e?void 0:e.fail)}};var X={chooseFiles:function(e){var n;return K(O,"chooseFiles",null!==(n=null==e?void 0:e.data)&&void 0!==n?n:[],null==e?void 0:e.success,null==e?void 0:e.fail)},isFileExist:function(e){var n;return K(O,"isFileExist",null!==(n=null==e?void 0:e.data)&&void 0!==n?n:[],null==e?void 0:e.success,null==e?void 0:e.fail)},openFileDetail:function(e){var n;return K(O,"showFile",null!==(n=null==e?void 0:e.data)&&void 0!==n?n:[],null==e?void 0:e.success,null==e?void 0:e.fail)},readFile:function(e){var n;return K(O,"readFile",null!==(n=null==e?void 0:e.data)&&void 0!==n?n:[],null==e?void 0:e.success,null==e?void 0:e.fail)},download:function(i){return new Promise(function(n,t){var e,o;(new FileTransfer).download(encodeURI(i.source),i.target,function(e){null!=i&&i.success(e),n(e)},function(e){null!=i&&i.fail(e),t(e)},null!==(e=i.trustAllHosts)&&void 0!==e&&e,null!==(o=i.options)&&void 0!==o?o:{})})}};var G=Object.freeze({__proto__:null,getWifiInfo:function(e){return K(k,"getWifiInfo",[],null==e?void 0:e.success,null==e?void 0:e.fail)}});var Y={scanner:function(e){var n;return K(L,"scanner",null!==(n=null==e?void 0:e.data)&&void 0!==n?n:[],null==e?void 0:e.success,null==e?void 0:e.fail)},voiceToText:function(e){return K(h,"voiceToText",[],null==e?void 0:e.success,null==e?void 0:e.fail)},copyText:function(e){return F(h,"copyText",[e.text])}};var q=Object.freeze({__proto__:null,openEmail:function(e){return K(w,"openEmail",[],null==e?void 0:e.success,null==e?void 0:e.fail,!1)},writeEmail:function(e){var n=e.success,t=e.fail,o=s(e,["success","fail"]);return K(w,"writeEmail",[o],n,t,!1)}});var Q=Object.freeze({__proto__:null,getUserTicket:function(e){return K(m,"getUserTicket",[],null==e?void 0:e.success,null==e?void 0:e.fail)},biometric:function(e){return K(S,"routeBiometricAuthenticationLock",[],null==e?void 0:e.success,null==e?void 0:e.fail)}});function Z(e,n,t){document.addEventListener(e,n,t)}var $=Object.freeze({__proto__:null,bindBackButtonEvent:function(n){cordova.exec(function(){},function(){},"CoreAndroid","overrideBackbutton",[!0]),cordova.exec(function(e){"backbutton"===e.action&&"function"==typeof n&&n()},function(){},"CoreAndroid","messageChannel",[])},bindPauseEvent:function(n){t()&&(o()&&Z("pause",function(e){if(f(n))return n(e)},!1),i()&&cordova.exec(function(e){"pause"===e.action&&f(n)&&n()},function(){},"CoreAndroid","messageChannel",[]))},bindResumeEvent:function(n){t()&&(o()&&Z("resume",function(e){if(f(n))return n(e)},!1),i()&&cordova.exec(function(e){"resume"===e.action&&f(n)&&n()},function(){},"CoreAndroid","messageChannel",[]))}});var ee=Object.freeze({__proto__:null,route:function(e){var n=e.success,t=e.fail,o=s(e,["success","fail"]);return K(W,"route",[{scheme_url:o.schemeUrl}],n,t,!1)},searchInApp:function(e){var n;return K(_,"searchInApp",null!==(n=null==e?void 0:e.data)&&void 0!==n?n:[],null==e?void 0:e.success,null==e?void 0:e.fail)},showAppChatViewById:function(e){var n;return K(_,"showAppChatView",null!==(n=null==e?void 0:e.data)&&void 0!==n?n:[],null==e?void 0:e.success,null==e?void 0:e.fail)},showAppListById:function(e){var n;return K(_,"showAppListById",null!==(n=null==e?void 0:e.data)&&void 0!==n?n:[],null==e?void 0:e.success,null==e?void 0:e.fail)}});var ne=Object.freeze({__proto__:null,showUserChatViewByUser:function(e){var n;return K(_,"showUserChatViewByUser",null!==(n=null==e?void 0:e.data)&&void 0!==n?n:[],null==e?void 0:e.success,null==e?void 0:e.fail)},openDiscussionById:function(e){var n;return K(_,"openDiscussionById",null!==(n=null==e?void 0:e.data)&&void 0!==n?n:[],null==e?void 0:e.success,null==e?void 0:e.fail)},createDiscussionChat:function(e){var n;return K(_,"createDiscussionChat",null!==(n=null==e?void 0:e.data)&&void 0!==n?n:[],null==e?void 0:e.success,null==e?void 0:e.fail)},selectDiscussionMembers:function(e){var n;return K(_,"selectDiscussionMembers",null!==(n=null==e?void 0:e.data)&&void 0!==n?n:[],null==e?void 0:e.success,null==e?void 0:e.fail)}});var te=Object.freeze({__proto__:null,getCurrentUserInfo:function(e){var n;return K(_,"getCurrentUserInfo",null!==(n=null==e?void 0:e.data)&&void 0!==n?n:[],null==e?void 0:e.success,null==e?void 0:e.fail)},getCurrentEmployeeInfo:function(e){var n;return K(_,"getCurrentEmployeeInfo",null!==(n=null==e?void 0:e.data)&&void 0!==n?n:[],null==e?void 0:e.success,null==e?void 0:e.fail)},getUserInfoByUserId:function(e){var n;return K(_,"getUserInfoByUserId",null!==(n=null==e?void 0:e.data)&&void 0!==n?n:[],null==e?void 0:e.success,null==e?void 0:e.fail)},showUserInfoByUsername:function(e){var n;return K(_,"showUserInfoByUsername",null!==(n=null==e?void 0:e.data)&&void 0!==n?n:[],null==e?void 0:e.success,null==e?void 0:e.fail)}});var oe=Object.freeze({__proto__:null,changeLeftButton:function(e){return K(h,"changeLeftButton",[e.items],e.success,e.fail)},clearLeftButton:function(e){return K(h,"clearLeftButton",[],null==e?void 0:e.success,null==e?void 0:e.fail)},clearRightButtons:function(e){return K(h,"clearRightButtons",[],null==e?void 0:e.success,null==e?void 0:e.fail)},leftButton:function(e){var n=e.success,t=e.fail,o=s(e,["success","fail"]);return K(h,"leftButton",[o.method],n,t)},navigation:function(e){var n=e.success,t=e.fail,o=s(e,["success","fail"]);return K(h,"navigation",[o.mode],n,t)},rightButtons:function(e){return K(h,"rightButtons",[e.items],e.success,e.fail)},setTitle:function(e){return F(h,"title",[e])},visibleLeftButton:function(e){var n=e.success,t=e.fail,o=s(e,["success","fail"]);return K(h,"visibleLeftButton",[o],n,t)}});var ie=M,re=z,le=te,ue=ne,se=Object.freeze({__proto__:null,addWaterMask:function(e){var n=e.success,t=e.fail,o=s(e,["success","fail"]);return K(h,"addWaterMask",[o],n,t)},changeOrientation:function(e){var n=e.success,t=e.fail,o=s(e,["success","fail"]);return K(h,"changeOrientation",[o],n,t)},exit:function(e){return K(h,"exit",[],null==e?void 0:e.success,null==e?void 0:e.fail)},openWebView:function(e){var n=e.success,t=e.fail,o=s(e,["success","fail"]);return K(h,"openWebView",[o],n,t)},removeWaterMask:function(e){return K(h,"removeWaterMask",[],null==e?void 0:e.success,null==e?void 0:e.fail)},share:function(e){var n=e.success,t=e.fail,o=s(e,["success","fail"]);return K(h,"share",[o],n,t)},wxShare:function(e){var n=e.success,t=e.fail,o=s(e,["success","fail"]);return K(h,"wxShare",[o],n,t)},registerShakeListener:function(e){return K(h,"registerShakeListener",[],null==e?void 0:e.success,null==e?void 0:e.fail)},unregisterShakeListener:function(e){return K(h,"unregisterShakeListener",[],null==e?void 0:e.success,null==e?void 0:e.fail)}}),ce=oe,ae=Y,de=V,fe=H,ve=J,ge=X,pe=G,_e=q,me=Q,he=$,we=R,ye=B,be=K,Pe=F,Oe=D;e.app=ee,e.auth=me,e.contact=re,e.device=fe,e.email=_e,e.error=Oe,e.event=he,e.eventlog=ve,e.exec=be,e.execSync=Pe,e.file=ge,e.header=ce,e.image=ie,e.init=we,e.location=de,e.native={},e.network=pe,e.ready=ye,e.session=ue,e.user=le,e.util=ae,e.version="v1.0.0-alpha.6",e.webview=se,Object.defineProperty(e,"__esModule",{value:!0})});
