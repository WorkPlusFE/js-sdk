/*!
 * @w6s/sdk.js v0.0.1
 * (c) 2019 WorkPlusFE
 */
!function(o,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((o=o||self).WorkPlus={})}(this,function(o){"use strict";function t(o){return null===o||"object"!=typeof o&&"function"!=typeof o}function l(o){return"[object Object]"===Object.prototype.toString.call(o)}function r(o){return"[object Array]"===Object.prototype.toString.call(o)}function u(o){return"[object Function]"===Object.prototype.toString.call(o)}var n=(Object.defineProperty(e.prototype,"_fullPrefix",{get:function(){return this._prefix+":"},enumerable:!0,configurable:!0}),e.prototype._getFullKey=function(o){return this._fullPrefix+o},e.prototype.get=function(o){var n,e=this._getFullKey(o),i=null!=(n=this._storage.getItem(e))?n:"";if(!this.hasKey(e))throw Error("不存在的 key");return JSON.parse(i)},e.prototype.hasKey=function(o){for(var n,e=this._storage,i=!1,t=0;t<e.length;t++){var l=null!=(n=e.key(t))?n:"";l&&l===o&&(i=!0)}return i},e.prototype.add=function(o,n){var e=this._getFullKey(o),i=n;if(r(n)||l(n))i=JSON.stringify(n);else if(!t(n))throw Error("storage 不支持的数据类型");try{this._storage.setItem(e,i)}catch(o){throw Error("storage 添加失败")}},e.prototype.remove=function(o){var n,e=this._getFullKey(o);null===(n=this._storage)||void 0===n||n.removeItem(e)},e.prototype.clear=function(){var n=this;this.forEach(function(o){return n.remove(o)})},e.prototype.count=function(){for(var o,n=this._storage,e=this._fullPrefix,i=0,t=0;t<n.length;t++)(null!=(o=n.key(t))?o:"").indexOf(e)||i++;return i},e.prototype.forEach=function(o){for(var n,e=this._storage,i=this._fullPrefix,t=0;t<e.length;t++){var l=null!=(n=e.key(t))?n:"";l.indexOf(i)||o(l,this.get(l))}},e);function e(o){var n,e;if(this._prefix="workplus",this._connector=".",!((null===(n=window)||void 0===n?void 0:n.localStorage)&&(null===(e=window)||void 0===e?void 0:e.sessionStorage)))throw Error("当前环境不支持 storage.");this._prefix=o.prefix||this._prefix,this._connector=o.connector||this._connector,this._storage=window[o.type]}function i(){this._ready=!1,this.init()}function d(o,i,t,l,r){return new Promise(function(n,e){a.ready(function(){cordova.exec(function(o){return l&&u(l)&&l(o),n(o)},function(o){return r&&u(r)&&r(o),e(o)},o,i,t)})})}var a=new(i.prototype.init=function(o){return(null===(n=window)||void 0===n?void 0:n.navigator.userAgent.includes("workplus"))?!sessionStorage.get("ready")||(console.warn("已注入Cordova，无需重新实例化"),!1):(console.warn("当前非workplus环境，请检查重试"),!1);var n},i.prototype.ready=function(i){var t=this;return new Promise(function(o,n){if(t.isReday)o();else{var e=setTimeout(function(){console.warn("Cordova 注入异常"),n()},1e4);document.addEventListener("deviceready",function(){console.info("Cordova 注入成功"),i&&u(i)&&i(),t._isReday(),clearTimeout(e),o()},!1)}})},i.prototype._isReday=function(){this._ready=!0},Object.defineProperty(i.prototype,"isReday",{get:function(){return this._ready},enumerable:!0,configurable:!0}),i),s=a.init,v=a.ready,c=Object.freeze({__proto__:null,sleep:function(n){return new Promise(function(o){setTimeout(function(){return o()},n)})},loadScript:function(i){return new Promise(function(o,n){var e=document.createElement("script");e.type="text/javascript",e.src=i,e.addEventListener("load",function(){return o(e)},!1),e.addEventListener("error",function(){return n(e)},!1),document.head.appendChild(e)})},isString:function(o){return"[object String]"===Object.prototype.toString.call(o)},isPrimitive:t,isPlainObject:l,isArray:r,isFunction:u}),f="WorkPlus_Image",g="WorkPlus_DeviceInfo",p="WorkPlus_Location";var h={takePhoto:function(o){var n,e,i,t;return d(f,"takePhoto",null!=(e=null===(n=o)||void 0===n?void 0:n.data)?e:[],null===(i=o)||void 0===i?void 0:i.success,null===(t=o)||void 0===t?void 0:t.fail)},takePhotoWithEdit:function(o){var n,e,i,t;return d(f,"takePhotoWithEdit",null!=(e=null===(n=o)||void 0===n?void 0:n.data)?e:[],null===(i=o)||void 0===i?void 0:i.success,null===(t=o)||void 0===t?void 0:t.fail)},takePicture:function(o){var n,e;return d(f,"takePicture",o.data,null===(n=o)||void 0===n?void 0:n.success,null===(e=o)||void 0===e?void 0:e.fail)},takePictureAddWatermark:function(o){var n,e;return d(f,"takePictureAddWatermark",o.data,null===(n=o)||void 0===n?void 0:n.success,null===(e=o)||void 0===e?void 0:e.fail)},selectImage:function(o){var n,e,i,t;return d(f,"selectImage",null!=(e=null===(n=o)||void 0===n?void 0:n.data)?e:[],null===(i=o)||void 0===i?void 0:i.success,null===(t=o)||void 0===t?void 0:t.fail)},selectImages:function(o){var n,e;return d(f,"selectImages",[{imageKeys:o.data}],null===(n=o)||void 0===n?void 0:n.success,null===(e=o)||void 0===e?void 0:e.fail)},selectImageWithEdit:function(o){var n,e,i,t;return d(f,"selectImageWithEdit",null!=(e=null===(n=o)||void 0===n?void 0:n.data)?e:[],null===(i=o)||void 0===i?void 0:i.success,null===(t=o)||void 0===t?void 0:t.fail)},saveImages:function(o){var n,e;return d(f,"saveImages",o.data,null===(n=o)||void 0===n?void 0:n.success,null===(e=o)||void 0===e?void 0:e.fail)},showImages:function(o){var n,e;return d(f,"showImages",o.data,null===(n=o)||void 0===n?void 0:n.success,null===(e=o)||void 0===e?void 0:e.fail)},chooseImages:function(o){var n,e;return d(f,"chooseImages",o.data,null===(n=o)||void 0===n?void 0:n.success,null===(e=o)||void 0===e?void 0:e.fail)},actionForLongPressImage:function(o){var n,e;return d(f,"actionForLongPressImage",o.data,null===(n=o)||void 0===n?void 0:n.success,null===(e=o)||void 0===e?void 0:e.fail)},cleanCompressImage:function(o){var n,e,i,t;return d(f,"cleanCompressImage",null!=(e=null===(n=o)||void 0===n?void 0:n.data)?e:[],null===(i=o)||void 0===i?void 0:i.success,null===(t=o)||void 0===t?void 0:t.fail)}},y="WorkPlus_Contact";var m=c,I=Object.freeze({__proto__:null,getSingleContact:function(o){var n,e,i,t;return d(y,"getContact",null!=(e=null===(n=o)||void 0===n?void 0:n.data)?e:[],null===(i=o)||void 0===i?void 0:i.success,null===(t=o)||void 0===t?void 0:t.fail)},getContacts:function(o){var n,e,i,t;return d(y,"getContacts",null!=(e=null===(n=o)||void 0===n?void 0:n.data)?e:[],null===(i=o)||void 0===i?void 0:i.success,null===(t=o)||void 0===t?void 0:t.fail)},getEmployeesFromCurrentOrg:function(o){var n,e,i,t;return d(y,"getEmployeesFromCurrentOrg",null!=(e=null===(n=o)||void 0===n?void 0:n.data)?e:[],null===(i=o)||void 0===i?void 0:i.success,null===(t=o)||void 0===t?void 0:t.fail)},getCurrentUserInfo:function(o){var n,e,i,t;return d(y,"getCurrentUserInfo",null!=(e=null===(n=o)||void 0===n?void 0:n.data)?e:[],null===(i=o)||void 0===i?void 0:i.success,null===(t=o)||void 0===t?void 0:t.fail)},getCurrentEmployeeInfo:function(o){var n,e,i,t;return d(y,"getCurrentEmployeeInfo",null!=(e=null===(n=o)||void 0===n?void 0:n.data)?e:[],null===(i=o)||void 0===i?void 0:i.success,null===(t=o)||void 0===t?void 0:t.fail)},showUserChatViewByUser:function(o){var n,e,i,t;return d(y,"showUserChatViewByUser",null!=(e=null===(n=o)||void 0===n?void 0:n.data)?e:[],null===(i=o)||void 0===i?void 0:i.success,null===(t=o)||void 0===t?void 0:t.fail)},getMobileContacts:function(o){var n,e,i,t;return d(y,"getMobileContacts",null!=(e=null===(n=o)||void 0===n?void 0:n.data)?e:[],null===(i=o)||void 0===i?void 0:i.success,null===(t=o)||void 0===t?void 0:t.fail)},getUserInfoByUserId:function(o){var n,e,i,t;return d(y,"getUserInfoByUserId",null!=(e=null===(n=o)||void 0===n?void 0:n.data)?e:[],null===(i=o)||void 0===i?void 0:i.success,null===(t=o)||void 0===t?void 0:t.fail)},showUserInfoByUsername:function(o){var n,e,i,t;return d(y,"showUserInfoByUsername",null!=(e=null===(n=o)||void 0===n?void 0:n.data)?e:[],null===(i=o)||void 0===i?void 0:i.success,null===(t=o)||void 0===t?void 0:t.fail)},openDiscussionById:function(o){var n,e,i,t;return d(y,"openDiscussionById",null!=(e=null===(n=o)||void 0===n?void 0:n.data)?e:[],null===(i=o)||void 0===i?void 0:i.success,null===(t=o)||void 0===t?void 0:t.fail)},createDiscussionChat:function(o){var n,e,i,t;return d(y,"createDiscussionChat",null!=(e=null===(n=o)||void 0===n?void 0:n.data)?e:[],null===(i=o)||void 0===i?void 0:i.success,null===(t=o)||void 0===t?void 0:t.fail)},showAppChatViewById:function(o){var n,e,i,t;return d(y,"showAppChatView",null!=(e=null===(n=o)||void 0===n?void 0:n.data)?e:[],null===(i=o)||void 0===i?void 0:i.success,null===(t=o)||void 0===t?void 0:t.fail)},searchInApp:function(o){var n,e,i,t;return d(y,"searchInApp",null!=(e=null===(n=o)||void 0===n?void 0:n.data)?e:[],null===(i=o)||void 0===i?void 0:i.success,null===(t=o)||void 0===t?void 0:t.fail)},showAppListById:function(o){var n,e,i,t;return d(y,"showAppListById",null!=(e=null===(n=o)||void 0===n?void 0:n.data)?e:[],null===(i=o)||void 0===i?void 0:i.success,null===(t=o)||void 0===t?void 0:t.fail)},selectContacts:function(o){var n,e,i,t;return d(y,"selectContacts",null!=(e=null===(n=o)||void 0===n?void 0:n.data)?e:[],null===(i=o)||void 0===i?void 0:i.success,null===(t=o)||void 0===t?void 0:t.fail)},selectDiscussionMembers:function(o){var n,e,i,t;return d(y,"selectDiscussionMembers",null!=(e=null===(n=o)||void 0===n?void 0:n.data)?e:[],null===(i=o)||void 0===i?void 0:i.success,null===(t=o)||void 0===t?void 0:t.fail)},selectContactsCache:function(o){var n,e,i,t;return d(y,"selectContactsCache",null!=(e=null===(n=o)||void 0===n?void 0:n.data)?e:[],null===(i=o)||void 0===i?void 0:i.success,null===(t=o)||void 0===t?void 0:t.fail)}}),_={getLocation:function(o){var n,e,i,t;return d(p,"getLocation",null!=(e=null===(n=o)||void 0===n?void 0:n.data)?e:[],null===(i=o)||void 0===i?void 0:i.success,null===(t=o)||void 0===t?void 0:t.fail)},openSignIn:function(o){var n,e,i,t;return d(p,"enableOrgSignIn",null!=(e=null===(n=o)||void 0===n?void 0:n.data)?e:[],null===(i=o)||void 0===i?void 0:i.success,null===(t=o)||void 0===t?void 0:t.fail)},closeSignIn:function(o){var n,e,i,t;return d(p,"disableOrgSignIn",null!=(e=null===(n=o)||void 0===n?void 0:n.data)?e:[],null===(i=o)||void 0===i?void 0:i.success,null===(t=o)||void 0===t?void 0:t.fail)}},w={getDeviceInfo:function(o){var n,e,i,t;return d(g,"getDeviceInfo",null!=(e=null===(n=o)||void 0===n?void 0:n.data)?e:[],null===(i=o)||void 0===i?void 0:i.success,null===(t=o)||void 0===t?void 0:t.fail)},getIpAddress:function(o){var n,e,i,t;return d(g,"getIpAddress",null!=(e=null===(n=o)||void 0===n?void 0:n.data)?e:[],null===(i=o)||void 0===i?void 0:i.success,null===(t=o)||void 0===t?void 0:t.fail)},getPedometerData:function(o){var n,e,i,t;return d(g,"getPedometerData",null!=(e=null===(n=o)||void 0===n?void 0:n.data)?e:[],null===(i=o)||void 0===i?void 0:i.success,null===(t=o)||void 0===t?void 0:t.fail)}},C=s,P=v,b=d;o.Storage=n,o.contact=I,o.device=w,o.exec=b,o.image=h,o.init=C,o.location=_,o.native={},o.off=function(o,n,e){document.removeEventListener(o,n,e)},o.on=function(o,n,e){document.addEventListener(o,n,e)},o.ready=P,o.utils=m,o.version="0.0.1",Object.defineProperty(o,"__esModule",{value:!0})});
