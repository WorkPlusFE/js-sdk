/*!
 * @w6s/sdk.js v0.0.1
 * (c) 2019 WorkPlusFE
 */
!function(o,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((o=o||self).WorkPlus={})}(this,function(o){"use strict";function t(o){return null===o||"object"!=typeof o&&"function"!=typeof o}function l(o){return"[object Object]"===Object.prototype.toString.call(o)}function r(o){return"[object Array]"===Object.prototype.toString.call(o)}function u(o){return"[object Function]"===Object.prototype.toString.call(o)}var n=(Object.defineProperty(i.prototype,"_fullPrefix",{get:function(){return this._prefix+":"},enumerable:!0,configurable:!0}),i.prototype._getFullKey=function(o){return this._fullPrefix+o},i.prototype.get=function(o){var n,i=this._getFullKey(o),e=null!=(n=this._storage.getItem(i))?n:"";if(!this.hasKey(i))throw Error("不存在的 key");return JSON.parse(e)},i.prototype.hasKey=function(o){for(var n,i=this._storage,e=!1,t=0;t<i.length;t++){var l=null!=(n=i.key(t))?n:"";l&&l===o&&(e=!0)}return e},i.prototype.add=function(o,n){var i=this._getFullKey(o),e=n;if(r(n)||l(n))e=JSON.stringify(n);else if(!t(n))throw Error("storage 不支持的数据类型");try{this._storage.setItem(i,e)}catch(o){throw Error("storage 添加失败")}},i.prototype.remove=function(o){var n,i=this._getFullKey(o);null===(n=this._storage)||void 0===n||n.removeItem(i)},i.prototype.clear=function(){var n=this;this.forEach(function(o){return n.remove(o)})},i.prototype.count=function(){for(var o,n=this._storage,i=this._fullPrefix,e=0,t=0;t<n.length;t++)(null!=(o=n.key(t))?o:"").indexOf(i)||e++;return e},i.prototype.forEach=function(o){for(var n,i=this._storage,e=this._fullPrefix,t=0;t<i.length;t++){var l=null!=(n=i.key(t))?n:"";l.indexOf(e)||o(l,this.get(l))}},i);function i(o){var n,i;if(this._prefix="workplus",this._connector=".",!((null===(n=window)||void 0===n?void 0:n.localStorage)&&(null===(i=window)||void 0===i?void 0:i.sessionStorage)))throw Error("当前环境不支持 storage.");this._prefix=o.prefix||this._prefix,this._connector=o.connector||this._connector,this._storage=window[o.type]}function e(){this._ready=!1,this.init()}var d=new(e.prototype.init=function(o){return(null===(n=window)||void 0===n?void 0:n.navigator.userAgent.includes("workplus"))?!sessionStorage.get("ready")||(console.warn("已注入Cordova，无需重新实例化"),!1):(console.warn("当前非workplus环境，请检查重试"),!1);var n},e.prototype.ready=function(e){var t=this;return new Promise(function(o,n){if(t.isReday)o();else{var i=setTimeout(function(){console.warn("Cordova 注入异常"),n()},1e4);document.addEventListener("deviceready",function(){console.info("Cordova 注入成功"),t._isReday(),e&&u(e)&&e(),clearTimeout(i),o()},!1)}})},e.prototype.error=function(o){u(o)?this._errorCallback=o:console.error("error的传参必须是函数类型")},e.prototype.onError=function(o){this._errorCallback&&u(this._errorCallback)&&this._errorCallback(o)},e.prototype._isReday=function(){this._ready=!0},Object.defineProperty(e.prototype,"isReday",{get:function(){return this._ready},enumerable:!0,configurable:!0}),e),a=d.init,s=d.ready,v=d.error;function c(e,t,o,l,r){return new Promise(function(n,i){try{d.ready(function(){cordova.exec(function(o){return l&&u(l)&&l(o),n(o)},function(o){return d.onError(e+"."+t+" 调用失败: "+o),r&&u(r)&&r(o),i(o)},e,t,o)})}catch(o){d.onError(o)}})}function f(n,i,o){cordova.exec(function(o){console.info(o)},function(o){d.onError(n+"."+i+" 调用失败: "+o)},n,i,o)}var g=Object.freeze({__proto__:null,sleep:function(n){return new Promise(function(o){setTimeout(function(){return o()},n)})},loadScript:function(e){return new Promise(function(o,n){var i=document.createElement("script");i.type="text/javascript",i.src=e,i.addEventListener("load",function(){return o(i)},!1),i.addEventListener("error",function(){return n(i)},!1),document.head.appendChild(i)})},isString:function(o){return"[object String]"===Object.prototype.toString.call(o)},isPrimitive:t,isPlainObject:l,isArray:r,isFunction:u}),p="WorkPlus_Image",h="WorkPlus_Contact",y="WorkPlus_DeviceInfo",m="WorkPlus_Location",I="WorkPlus_EventLog",_="WorkPlus_Files";var w={takePhoto:function(o){var n,i,e,t;return c(p,"takePhoto",null!=(i=null===(n=o)||void 0===n?void 0:n.data)?i:[],null===(e=o)||void 0===e?void 0:e.success,null===(t=o)||void 0===t?void 0:t.fail)},takePhotoWithEdit:function(o){var n,i,e,t;return c(p,"takePhotoWithEdit",null!=(i=null===(n=o)||void 0===n?void 0:n.data)?i:[],null===(e=o)||void 0===e?void 0:e.success,null===(t=o)||void 0===t?void 0:t.fail)},takePicture:function(o){var n,i;return c(p,"takePicture",o.data,null===(n=o)||void 0===n?void 0:n.success,null===(i=o)||void 0===i?void 0:i.fail)},takePictureAddWatermark:function(o){var n,i;return c(p,"takePictureAddWatermark",o.data,null===(n=o)||void 0===n?void 0:n.success,null===(i=o)||void 0===i?void 0:i.fail)},selectImage:function(o){var n,i,e,t;return c(p,"selectImage",null!=(i=null===(n=o)||void 0===n?void 0:n.data)?i:[],null===(e=o)||void 0===e?void 0:e.success,null===(t=o)||void 0===t?void 0:t.fail)},selectImages:function(o){var n,i;return c(p,"selectImages",[{imageKeys:o.data}],null===(n=o)||void 0===n?void 0:n.success,null===(i=o)||void 0===i?void 0:i.fail)},selectImageWithEdit:function(o){var n,i,e,t;return c(p,"selectImageWithEdit",null!=(i=null===(n=o)||void 0===n?void 0:n.data)?i:[],null===(e=o)||void 0===e?void 0:e.success,null===(t=o)||void 0===t?void 0:t.fail)},saveImages:function(o){return f(p,"saveImages",o.data)},showImages:function(o){return f(p,"showImages",o.data)},chooseImages:function(o){var n,i;return c(p,"chooseImages",o.data,null===(n=o)||void 0===n?void 0:n.success,null===(i=o)||void 0===i?void 0:i.fail)},actionForLongPressImage:function(o){return f(p,"actionForLongPressImage",o.data)},cleanCompressImage:function(){return f(p,"cleanCompressImage",[])}};var C=g,E=Object.freeze({__proto__:null,default:{getSingleContact:function(o){var n,i,e,t;return c(h,"getContact",null!=(i=null===(n=o)||void 0===n?void 0:n.data)?i:[],null===(e=o)||void 0===e?void 0:e.success,null===(t=o)||void 0===t?void 0:t.fail)},getContacts:function(o){var n,i,e,t;return c(h,"getContacts",null!=(i=null===(n=o)||void 0===n?void 0:n.data)?i:[],null===(e=o)||void 0===e?void 0:e.success,null===(t=o)||void 0===t?void 0:t.fail)},getEmployeesFromCurrentOrg:function(o){var n,i,e,t;return c(h,"getEmployeesFromCurrentOrg",null!=(i=null===(n=o)||void 0===n?void 0:n.data)?i:[],null===(e=o)||void 0===e?void 0:e.success,null===(t=o)||void 0===t?void 0:t.fail)},getCurrentUserInfo:function(o){var n,i,e,t;return c(h,"getCurrentUserInfo",null!=(i=null===(n=o)||void 0===n?void 0:n.data)?i:[],null===(e=o)||void 0===e?void 0:e.success,null===(t=o)||void 0===t?void 0:t.fail)},getMobileContacts:function(o){var n,i,e,t;return c(h,"getMobileContacts",null!=(i=null===(n=o)||void 0===n?void 0:n.data)?i:[],null===(e=o)||void 0===e?void 0:e.success,null===(t=o)||void 0===t?void 0:t.fail)},showUserChatViewByUser:function(o){var n,i,e,t;return c(h,"showUserChatViewByUser",null!=(i=null===(n=o)||void 0===n?void 0:n.data)?i:[],null===(e=o)||void 0===e?void 0:e.success,null===(t=o)||void 0===t?void 0:t.fail)},getCurrentEmployeeInfo:function(o){var n,i,e,t;return c(h,"getCurrentEmployeeInfo",null!=(i=null===(n=o)||void 0===n?void 0:n.data)?i:[],null===(e=o)||void 0===e?void 0:e.success,null===(t=o)||void 0===t?void 0:t.fail)},getUserInfoByUserId:function(o){var n,i,e,t;return c(h,"getUserInfoByUserId",null!=(i=null===(n=o)||void 0===n?void 0:n.data)?i:[],null===(e=o)||void 0===e?void 0:e.success,null===(t=o)||void 0===t?void 0:t.fail)},showUserInfoByUsername:function(o){var n,i,e,t;return c(h,"showUserInfoByUsername",null!=(i=null===(n=o)||void 0===n?void 0:n.data)?i:[],null===(e=o)||void 0===e?void 0:e.success,null===(t=o)||void 0===t?void 0:t.fail)},openDiscussionById:function(o){var n,i,e,t;return c(h,"openDiscussionById",null!=(i=null===(n=o)||void 0===n?void 0:n.data)?i:[],null===(e=o)||void 0===e?void 0:e.success,null===(t=o)||void 0===t?void 0:t.fail)},createDiscussionChat:function(o){var n,i,e,t;return c(h,"createDiscussionChat",null!=(i=null===(n=o)||void 0===n?void 0:n.data)?i:[],null===(e=o)||void 0===e?void 0:e.success,null===(t=o)||void 0===t?void 0:t.fail)},showAppChatViewById:function(o){var n,i,e,t;return c(h,"showAppChatView",null!=(i=null===(n=o)||void 0===n?void 0:n.data)?i:[],null===(e=o)||void 0===e?void 0:e.success,null===(t=o)||void 0===t?void 0:t.fail)},searchInApp:function(o){var n,i,e,t;return c(h,"searchInApp",null!=(i=null===(n=o)||void 0===n?void 0:n.data)?i:[],null===(e=o)||void 0===e?void 0:e.success,null===(t=o)||void 0===t?void 0:t.fail)},showAppListById:function(o){var n,i,e,t;return c(h,"showAppListById",null!=(i=null===(n=o)||void 0===n?void 0:n.data)?i:[],null===(e=o)||void 0===e?void 0:e.success,null===(t=o)||void 0===t?void 0:t.fail)},selectContacts:function(o){var n,i,e,t;return c(h,"selectContacts",null!=(i=null===(n=o)||void 0===n?void 0:n.data)?i:[],null===(e=o)||void 0===e?void 0:e.success,null===(t=o)||void 0===t?void 0:t.fail)},selectDiscussionMembers:function(o){var n,i,e,t;return c(h,"selectDiscussionMembers",null!=(i=null===(n=o)||void 0===n?void 0:n.data)?i:[],null===(e=o)||void 0===e?void 0:e.success,null===(t=o)||void 0===t?void 0:t.fail)},selectContactsCache:function(o){var n,i,e,t;return c(h,"selectContactsCache",null!=(i=null===(n=o)||void 0===n?void 0:n.data)?i:[],null===(e=o)||void 0===e?void 0:e.success,null===(t=o)||void 0===t?void 0:t.fail)}}}),P={getLocation:function(o){var n,i,e,t;return c(m,"getLocation",null!=(i=null===(n=o)||void 0===n?void 0:n.data)?i:[],null===(e=o)||void 0===e?void 0:e.success,null===(t=o)||void 0===t?void 0:t.fail)},openSignIn:function(o){var n,i,e,t;return c(m,"enableOrgSignIn",null!=(i=null===(n=o)||void 0===n?void 0:n.data)?i:[],null===(e=o)||void 0===e?void 0:e.success,null===(t=o)||void 0===t?void 0:t.fail)},closeSignIn:function(o){var n,i,e,t;return c(m,"disableOrgSignIn",null!=(i=null===(n=o)||void 0===n?void 0:n.data)?i:[],null===(e=o)||void 0===e?void 0:e.success,null===(t=o)||void 0===t?void 0:t.fail)}},b={getDeviceInfo:function(o){var n,i,e,t;return c(y,"getDeviceInfo",null!=(i=null===(n=o)||void 0===n?void 0:n.data)?i:[],null===(e=o)||void 0===e?void 0:e.success,null===(t=o)||void 0===t?void 0:t.fail)},getIpAddress:function(o){var n,i,e,t;return c(y,"getIpAddress",null!=(i=null===(n=o)||void 0===n?void 0:n.data)?i:[],null===(e=o)||void 0===e?void 0:e.success,null===(t=o)||void 0===t?void 0:t.fail)},getPedometerData:function(o){var n,i,e,t;return c(y,"getPedometerData",null!=(i=null===(n=o)||void 0===n?void 0:n.data)?i:[],null===(e=o)||void 0===e?void 0:e.success,null===(t=o)||void 0===t?void 0:t.fail)}},k={getEventLogs:function(o){var n,i,e,t;return c(I,"getEventLogs",null!=(i=null===(n=o)||void 0===n?void 0:n.data)?i:[],null===(e=o)||void 0===e?void 0:e.success,null===(t=o)||void 0===t?void 0:t.fail)},getTodayUseDuration:function(o){var n,i,e,t;return c(I,"getTodayUseDuration",null!=(i=null===(n=o)||void 0===n?void 0:n.data)?i:[],null===(e=o)||void 0===e?void 0:e.success,null===(t=o)||void 0===t?void 0:t.fail)}},F={chooseFiles:function(o){var n,i,e,t;return c(_,"chooseFiles",null!=(i=null===(n=o)||void 0===n?void 0:n.data)?i:[],null===(e=o)||void 0===e?void 0:e.success,null===(t=o)||void 0===t?void 0:t.fail)},getEmailAttachmentDir:function(o){var n,i,e,t;return c(_,"getEmailAttachmentDir",null!=(i=null===(n=o)||void 0===n?void 0:n.data)?i:[],null===(e=o)||void 0===e?void 0:e.success,null===(t=o)||void 0===t?void 0:t.fail)},isFileExist:function(o){var n,i,e,t;return c(_,"isFileExist",null!=(i=null===(n=o)||void 0===n?void 0:n.data)?i:[],null===(e=o)||void 0===e?void 0:e.success,null===(t=o)||void 0===t?void 0:t.fail)},openEmailAttachment:function(o){var n,i,e,t;return c(_,"openEmailAttachment",null!=(i=null===(n=o)||void 0===n?void 0:n.data)?i:[],null===(e=o)||void 0===e?void 0:e.success,null===(t=o)||void 0===t?void 0:t.fail)},openFileDetail:function(o){var n,i,e,t;return c(_,"showFile",null!=(i=null===(n=o)||void 0===n?void 0:n.data)?i:[],null===(e=o)||void 0===e?void 0:e.success,null===(t=o)||void 0===t?void 0:t.fail)},readFile:function(o){var n,i,e,t;return c(_,"readFile",null!=(i=null===(n=o)||void 0===n?void 0:n.data)?i:[],null===(e=o)||void 0===e?void 0:e.success,null===(t=o)||void 0===t?void 0:t.fail)},selectFile:function(o){var n,i,e,t;return c(_,"selectFile",null!=(i=null===(n=o)||void 0===n?void 0:n.data)?i:[],null===(e=o)||void 0===e?void 0:e.success,null===(t=o)||void 0===t?void 0:t.fail)},selectFiles:function(o){var n,i,e,t;return c(_,"selectFiles",null!=(i=null===(n=o)||void 0===n?void 0:n.data)?i:[],null===(e=o)||void 0===e?void 0:e.success,null===(t=o)||void 0===t?void 0:t.fail)}},x={getWifiInfo:function(o){var n,i,e,t;return c("WorkPlus_NetInfo","getWifiInfo",null!=(i=null===(n=o)||void 0===n?void 0:n.data)?i:[],null===(e=o)||void 0===e?void 0:e.success,null===(t=o)||void 0===t?void 0:t.fail)}},O=a,S=s,j=c,A=f,D=v;o.Storage=n,o.contact=E,o.device=b,o.error=D,o.eventlog=k,o.exec=j,o.execSync=A,o.file=F,o.image=w,o.init=O,o.location=P,o.native={},o.network=x,o.off=function(o,n,i){document.removeEventListener(o,n,i)},o.on=function(o,n,i){document.addEventListener(o,n,i)},o.ready=S,o.utils=C,o.version="0.0.1",Object.defineProperty(o,"__esModule",{value:!0})});
