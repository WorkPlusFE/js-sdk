/*!
 * @w6s/sdk.js v0.0.1
 * (c) 2019 WorkPlusFE
 */
!function(o,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((o=o||self).WorkPlus={})}(this,function(o){"use strict";function i(o){return null===o||"object"!=typeof o&&"function"!=typeof o}function r(o){return"[object Object]"===Object.prototype.toString.call(o)}function l(o){return"[object Array]"===Object.prototype.toString.call(o)}function u(o){return"[object Function]"===Object.prototype.toString.call(o)}var n=(Object.defineProperty(e.prototype,"_fullPrefix",{get:function(){return this._prefix+":"},enumerable:!0,configurable:!0}),e.prototype._getFullKey=function(o){return this._fullPrefix+o},e.prototype.get=function(o){var n,e=this._getFullKey(o),t=null!=(n=this._storage.getItem(e))?n:"";if(!this.hasKey(e))throw Error("不存在的 key");return JSON.parse(t)},e.prototype.hasKey=function(o){for(var n,e=this._storage,t=!1,i=0;i<e.length;i++){var r=null!=(n=e.key(i))?n:"";r&&r===o&&(t=!0)}return t},e.prototype.add=function(o,n){var e=this._getFullKey(o),t=n;if(l(n)||r(n))t=JSON.stringify(n);else if(!i(n))throw Error("storage 不支持的数据类型");try{this._storage.setItem(e,t)}catch(o){throw Error("storage 添加失败")}},e.prototype.remove=function(o){var n,e=this._getFullKey(o);null===(n=this._storage)||void 0===n||n.removeItem(e)},e.prototype.clear=function(){var n=this;this.forEach(function(o){return n.remove(o)})},e.prototype.count=function(){for(var o,n=this._storage,e=this._fullPrefix,t=0,i=0;i<n.length;i++)(null!=(o=n.key(i))?o:"").indexOf(e)||t++;return t},e.prototype.forEach=function(o){for(var n,e=this._storage,t=this._fullPrefix,i=0;i<e.length;i++){var r=null!=(n=e.key(i))?n:"";r.indexOf(t)||o(r,this.get(r))}},e);function e(o){var n,e;if(this._prefix="workplus",this._connector=".",!((null===(n=window)||void 0===n?void 0:n.localStorage)&&(null===(e=window)||void 0===e?void 0:e.sessionStorage)))throw Error("当前环境不支持 storage.");this._prefix=o.prefix||this._prefix,this._connector=o.connector||this._connector,this._storage=window[o.type]}function t(){this._ready=!1,this.init()}var a=new(t.prototype.init=function(o){return(null===(n=window)||void 0===n?void 0:n.navigator.userAgent.includes("workplus"))?!sessionStorage.get("ready")||(console.warn("已注入Cordova，无需重新实例化"),!1):(console.warn("当前非workplus环境，请检查重试"),!1);var n},t.prototype.ready=function(t){var i=this;return new Promise(function(o,n){if(i.isReday)o();else{var e=setTimeout(function(){console.warn("Cordova 注入异常"),n()},1e4);document.addEventListener("deviceready",function(){console.info("Cordova 注入成功"),i._isReday(),t&&u(t)&&t(),clearTimeout(e),o()},!1)}})},t.prototype.error=function(o){u(o)?this._errorCallback=o:console.error("error的传参必须是函数类型")},t.prototype.onError=function(o){this._errorCallback&&u(this._errorCallback)&&this._errorCallback(o)},t.prototype._isReday=function(){this._ready=!0},Object.defineProperty(t.prototype,"isReday",{get:function(){return this._ready},enumerable:!0,configurable:!0}),t),d=a.init,s=a.ready,v=a.error;function c(t,i,o,r,l){return new Promise(function(n,e){try{a.ready(function(){cordova.exec(function(o){return r&&u(r)&&r(o),n(o)},function(o){return a.onError(t+"."+i+" 调用失败: "+o),l&&u(l)&&l(o),e(o)},t,i,o)})}catch(o){a.onError(o)}})}function f(n,e,o){cordova.exec(function(o){console.info(o)},function(o){a.onError(n+"."+e+" 调用失败: "+o)},n,e,o)}var g=Object.freeze({__proto__:null,sleep:function(n){return new Promise(function(o){setTimeout(function(){return o()},n)})},loadScript:function(t){return new Promise(function(o,n){var e=document.createElement("script");e.type="text/javascript",e.src=t,e.addEventListener("load",function(){return o(e)},!1),e.addEventListener("error",function(){return n(e)},!1),document.head.appendChild(e)})},isString:function(o){return"[object String]"===Object.prototype.toString.call(o)},isPrimitive:i,isPlainObject:r,isArray:l,isFunction:u}),p="WorkPlus_Image",h="WorkPlus_Contact",y="WorkPlus_DeviceInfo",m="WorkPlus_Location",I="WorkPlus_EventLog";var _={takePhoto:function(o){var n,e,t,i;return c(p,"takePhoto",null!=(e=null===(n=o)||void 0===n?void 0:n.data)?e:[],null===(t=o)||void 0===t?void 0:t.success,null===(i=o)||void 0===i?void 0:i.fail)},takePhotoWithEdit:function(o){var n,e,t,i;return c(p,"takePhotoWithEdit",null!=(e=null===(n=o)||void 0===n?void 0:n.data)?e:[],null===(t=o)||void 0===t?void 0:t.success,null===(i=o)||void 0===i?void 0:i.fail)},takePicture:function(o){var n,e;return c(p,"takePicture",o.data,null===(n=o)||void 0===n?void 0:n.success,null===(e=o)||void 0===e?void 0:e.fail)},takePictureAddWatermark:function(o){var n,e;return c(p,"takePictureAddWatermark",o.data,null===(n=o)||void 0===n?void 0:n.success,null===(e=o)||void 0===e?void 0:e.fail)},selectImage:function(o){var n,e,t,i;return c(p,"selectImage",null!=(e=null===(n=o)||void 0===n?void 0:n.data)?e:[],null===(t=o)||void 0===t?void 0:t.success,null===(i=o)||void 0===i?void 0:i.fail)},selectImages:function(o){var n,e;return c(p,"selectImages",[{imageKeys:o.data}],null===(n=o)||void 0===n?void 0:n.success,null===(e=o)||void 0===e?void 0:e.fail)},selectImageWithEdit:function(o){var n,e,t,i;return c(p,"selectImageWithEdit",null!=(e=null===(n=o)||void 0===n?void 0:n.data)?e:[],null===(t=o)||void 0===t?void 0:t.success,null===(i=o)||void 0===i?void 0:i.fail)},saveImages:function(o){return f(p,"saveImages",o.data)},showImages:function(o){return f(p,"showImages",o.data)},chooseImages:function(o){var n,e;return c(p,"chooseImages",o.data,null===(n=o)||void 0===n?void 0:n.success,null===(e=o)||void 0===e?void 0:e.fail)},actionForLongPressImage:function(o){return f(p,"actionForLongPressImage",o.data)},cleanCompressImage:function(){return f(p,"cleanCompressImage",[])}};var w=g,C=Object.freeze({__proto__:null,default:{getSingleContact:function(o){var n,e,t,i;return c(h,"getContact",null!=(e=null===(n=o)||void 0===n?void 0:n.data)?e:[],null===(t=o)||void 0===t?void 0:t.success,null===(i=o)||void 0===i?void 0:i.fail)},getContacts:function(o){var n,e,t,i;return c(h,"getContacts",null!=(e=null===(n=o)||void 0===n?void 0:n.data)?e:[],null===(t=o)||void 0===t?void 0:t.success,null===(i=o)||void 0===i?void 0:i.fail)},getEmployeesFromCurrentOrg:function(o){var n,e,t,i;return c(h,"getEmployeesFromCurrentOrg",null!=(e=null===(n=o)||void 0===n?void 0:n.data)?e:[],null===(t=o)||void 0===t?void 0:t.success,null===(i=o)||void 0===i?void 0:i.fail)},getCurrentUserInfo:function(o){var n,e,t,i;return c(h,"getCurrentUserInfo",null!=(e=null===(n=o)||void 0===n?void 0:n.data)?e:[],null===(t=o)||void 0===t?void 0:t.success,null===(i=o)||void 0===i?void 0:i.fail)},getMobileContacts:function(o){var n,e,t,i;return c(h,"getMobileContacts",null!=(e=null===(n=o)||void 0===n?void 0:n.data)?e:[],null===(t=o)||void 0===t?void 0:t.success,null===(i=o)||void 0===i?void 0:i.fail)},showUserChatViewByUser:function(o){var n,e,t,i;return c(h,"showUserChatViewByUser",null!=(e=null===(n=o)||void 0===n?void 0:n.data)?e:[],null===(t=o)||void 0===t?void 0:t.success,null===(i=o)||void 0===i?void 0:i.fail)},getCurrentEmployeeInfo:function(o){var n,e,t,i;return c(h,"getCurrentEmployeeInfo",null!=(e=null===(n=o)||void 0===n?void 0:n.data)?e:[],null===(t=o)||void 0===t?void 0:t.success,null===(i=o)||void 0===i?void 0:i.fail)},getUserInfoByUserId:function(o){var n,e,t,i;return c(h,"getUserInfoByUserId",null!=(e=null===(n=o)||void 0===n?void 0:n.data)?e:[],null===(t=o)||void 0===t?void 0:t.success,null===(i=o)||void 0===i?void 0:i.fail)},showUserInfoByUsername:function(o){var n,e,t,i;return c(h,"showUserInfoByUsername",null!=(e=null===(n=o)||void 0===n?void 0:n.data)?e:[],null===(t=o)||void 0===t?void 0:t.success,null===(i=o)||void 0===i?void 0:i.fail)},openDiscussionById:function(o){var n,e,t,i;return c(h,"openDiscussionById",null!=(e=null===(n=o)||void 0===n?void 0:n.data)?e:[],null===(t=o)||void 0===t?void 0:t.success,null===(i=o)||void 0===i?void 0:i.fail)},createDiscussionChat:function(o){var n,e,t,i;return c(h,"createDiscussionChat",null!=(e=null===(n=o)||void 0===n?void 0:n.data)?e:[],null===(t=o)||void 0===t?void 0:t.success,null===(i=o)||void 0===i?void 0:i.fail)},showAppChatViewById:function(o){var n,e,t,i;return c(h,"showAppChatView",null!=(e=null===(n=o)||void 0===n?void 0:n.data)?e:[],null===(t=o)||void 0===t?void 0:t.success,null===(i=o)||void 0===i?void 0:i.fail)},searchInApp:function(o){var n,e,t,i;return c(h,"searchInApp",null!=(e=null===(n=o)||void 0===n?void 0:n.data)?e:[],null===(t=o)||void 0===t?void 0:t.success,null===(i=o)||void 0===i?void 0:i.fail)},showAppListById:function(o){var n,e,t,i;return c(h,"showAppListById",null!=(e=null===(n=o)||void 0===n?void 0:n.data)?e:[],null===(t=o)||void 0===t?void 0:t.success,null===(i=o)||void 0===i?void 0:i.fail)},selectContacts:function(o){var n,e,t,i;return c(h,"selectContacts",null!=(e=null===(n=o)||void 0===n?void 0:n.data)?e:[],null===(t=o)||void 0===t?void 0:t.success,null===(i=o)||void 0===i?void 0:i.fail)},selectDiscussionMembers:function(o){var n,e,t,i;return c(h,"selectDiscussionMembers",null!=(e=null===(n=o)||void 0===n?void 0:n.data)?e:[],null===(t=o)||void 0===t?void 0:t.success,null===(i=o)||void 0===i?void 0:i.fail)},selectContactsCache:function(o){var n,e,t,i;return c(h,"selectContactsCache",null!=(e=null===(n=o)||void 0===n?void 0:n.data)?e:[],null===(t=o)||void 0===t?void 0:t.success,null===(i=o)||void 0===i?void 0:i.fail)}}}),b={getLocation:function(o){var n,e,t,i;return c(m,"getLocation",null!=(e=null===(n=o)||void 0===n?void 0:n.data)?e:[],null===(t=o)||void 0===t?void 0:t.success,null===(i=o)||void 0===i?void 0:i.fail)},openSignIn:function(o){var n,e,t,i;return c(m,"enableOrgSignIn",null!=(e=null===(n=o)||void 0===n?void 0:n.data)?e:[],null===(t=o)||void 0===t?void 0:t.success,null===(i=o)||void 0===i?void 0:i.fail)},closeSignIn:function(o){var n,e,t,i;return c(m,"disableOrgSignIn",null!=(e=null===(n=o)||void 0===n?void 0:n.data)?e:[],null===(t=o)||void 0===t?void 0:t.success,null===(i=o)||void 0===i?void 0:i.fail)}},P={getDeviceInfo:function(o){var n,e,t,i;return c(y,"getDeviceInfo",null!=(e=null===(n=o)||void 0===n?void 0:n.data)?e:[],null===(t=o)||void 0===t?void 0:t.success,null===(i=o)||void 0===i?void 0:i.fail)},getIpAddress:function(o){var n,e,t,i;return c(y,"getIpAddress",null!=(e=null===(n=o)||void 0===n?void 0:n.data)?e:[],null===(t=o)||void 0===t?void 0:t.success,null===(i=o)||void 0===i?void 0:i.fail)},getPedometerData:function(o){var n,e,t,i;return c(y,"getPedometerData",null!=(e=null===(n=o)||void 0===n?void 0:n.data)?e:[],null===(t=o)||void 0===t?void 0:t.success,null===(i=o)||void 0===i?void 0:i.fail)}},k={getEventLogs:function(o){var n,e,t,i;return c(I,"getEventLogs",null!=(e=null===(n=o)||void 0===n?void 0:n.data)?e:[],null===(t=o)||void 0===t?void 0:t.success,null===(i=o)||void 0===i?void 0:i.fail)},getTodayUseDuration:function(o){var n,e,t,i;return c(I,"getTodayUseDuration",null!=(e=null===(n=o)||void 0===n?void 0:n.data)?e:[],null===(t=o)||void 0===t?void 0:t.success,null===(i=o)||void 0===i?void 0:i.fail)}},E=d,x=s,O=c,S=f,j=v;o.Storage=n,o.contact=C,o.device=P,o.error=j,o.eventlog=k,o.exec=O,o.execSync=S,o.image=_,o.init=E,o.location=b,o.native={},o.off=function(o,n,e){document.removeEventListener(o,n,e)},o.on=function(o,n,e){document.addEventListener(o,n,e)},o.ready=x,o.utils=w,o.version="0.0.1",Object.defineProperty(o,"__esModule",{value:!0})});
