/*!
 * @w6s/sdk.js v0.0.1
 * (c) 2019 WorkPlusFE
 */
!function(o,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((o=o||self).WorkPlus={})}(this,function(o){"use strict";function i(o){return null===o||"object"!=typeof o&&"function"!=typeof o}function r(o){return"[object Object]"===Object.prototype.toString.call(o)}function l(o){return"[object Array]"===Object.prototype.toString.call(o)}function u(o){return"[object Function]"===Object.prototype.toString.call(o)}var e=(Object.defineProperty(n.prototype,"_fullPrefix",{get:function(){return this._prefix+":"},enumerable:!0,configurable:!0}),n.prototype._getFullKey=function(o){return this._fullPrefix+o},n.prototype.get=function(o){var e,n=this._getFullKey(o),t=null!=(e=this._storage.getItem(n))?e:"";if(!this.hasKey(n))throw Error("不存在的 key");return JSON.parse(t)},n.prototype.hasKey=function(o){for(var e,n=this._storage,t=!1,i=0;i<n.length;i++){var r=null!=(e=n.key(i))?e:"";r&&r===o&&(t=!0)}return t},n.prototype.add=function(o,e){var n=this._getFullKey(o),t=e;if(l(e)||r(e))t=JSON.stringify(e);else if(!i(e))throw Error("storage 不支持的数据类型");try{this._storage.setItem(n,t)}catch(o){throw Error("storage 添加失败")}},n.prototype.remove=function(o){var e,n=this._getFullKey(o);null===(e=this._storage)||void 0===e||e.removeItem(n)},n.prototype.clear=function(){var e=this;this.forEach(function(o){return e.remove(o)})},n.prototype.count=function(){for(var o,e=this._storage,n=this._fullPrefix,t=0,i=0;i<e.length;i++)(null!=(o=e.key(i))?o:"").indexOf(n)||t++;return t},n.prototype.forEach=function(o){for(var e,n=this._storage,t=this._fullPrefix,i=0;i<n.length;i++){var r=null!=(e=n.key(i))?e:"";r.indexOf(t)||o(r,this.get(r))}},n);function n(o){var e,n;if(this._prefix="workplus",this._connector=".",!((null===(e=window)||void 0===e?void 0:e.localStorage)&&(null===(n=window)||void 0===n?void 0:n.sessionStorage)))throw Error("当前环境不支持 storage.");this._prefix=o.prefix||this._prefix,this._connector=o.connector||this._connector,this._storage=window[o.type]}function t(){this._ready=!1,this.init()}function s(o,t,i,r,l){return new Promise(function(e,n){d.ready(function(){cordova.exec(function(o){return r&&u(r)&&r(o),e(o)},function(o){return l&&u(l)&&l(o),n(o)},o,t,i)})})}var d=new(t.prototype.init=function(o){return(null===(e=window)||void 0===e?void 0:e.navigator.userAgent.includes("workplus"))?!sessionStorage.get("ready")||(console.warn("已注入Cordova，无需重新实例化"),!1):(console.warn("当前非workplus环境，请检查重试"),!1);var e},t.prototype.ready=function(t){var i=this;return new Promise(function(o,e){if(i.isReday)o();else{var n=setTimeout(function(){console.warn("Cordova 注入异常"),e()},1e4);document.addEventListener("deviceready",function(){console.info("Cordova 注入成功"),t&&u(t)&&t(),i._isReday(),clearTimeout(n),o()},!1)}})},t.prototype._isReday=function(){this._ready=!0},Object.defineProperty(t.prototype,"isReday",{get:function(){return this._ready},enumerable:!0,configurable:!0}),t),a=d.init,c=d.ready,v=Object.freeze({__proto__:null,sleep:function(e){return new Promise(function(o){setTimeout(function(){return o()},e)})},loadScript:function(t){return new Promise(function(o,e){var n=document.createElement("script");n.type="text/javascript",n.src=t,n.addEventListener("load",function(){return o(n)},!1),n.addEventListener("error",function(){return e(n)},!1),document.head.appendChild(n)})},isString:function(o){return"[object String]"===Object.prototype.toString.call(o)},isPrimitive:i,isPlainObject:r,isArray:l,isFunction:u}),f="WorkPlus_Image";var p=Object.freeze({__proto__:null,takePhoto:function(o){var e;return s(f,"takePhoto",null!=(e=null===o||void 0===o?void 0:o.data)?e:[],null===o||void 0===o?void 0:o.success,null===o||void 0===o?void 0:o.fail)},takePhotoWithEdit:function(o){var e;return s(f,"takePhotoWithEdit",null!=(e=null===o||void 0===o?void 0:o.data)?e:[],null===o||void 0===o?void 0:o.success,null===o||void 0===o?void 0:o.fail)},selectImage:function(o){var e;return s(f,"selectImage",null!=(e=null===o||void 0===o?void 0:o.data)?e:[],null===o||void 0===o?void 0:o.success,null===o||void 0===o?void 0:o.fail)},selectImageWithEdit:function(o){var e;return s(f,"selectImageWithEdit",null!=(e=null===o||void 0===o?void 0:o.data)?e:[],null===o||void 0===o?void 0:o.success,null===o||void 0===o?void 0:o.fail)},selectImages:function(o){return s(f,"selectImages",[{imageKeys:o.data}],null===o||void 0===o?void 0:o.success,null===o||void 0===o?void 0:o.fail)},cleanCompressImage:function(o){var e;return s(f,"cleanCompressImage",null!=(e=null===o||void 0===o?void 0:o.data)?e:[],null===o||void 0===o?void 0:o.success,null===o||void 0===o?void 0:o.fail)},showImages:function(o){return s(f,"showImages",o.data,null===o||void 0===o?void 0:o.success,null===o||void 0===o?void 0:o.fail)},saveImages:function(o){return s(f,"saveImages",o.data,null===o||void 0===o?void 0:o.success,null===o||void 0===o?void 0:o.fail)},actionForLongPressImage:function(o){return s(f,"actionForLongPressImage",o.data,null===o||void 0===o?void 0:o.success,null===o||void 0===o?void 0:o.fail)},takePicture:function(o){return s(f,"takePicture",o.data,null===o||void 0===o?void 0:o.success,null===o||void 0===o?void 0:o.fail)},chooseImages:function(o){return s(f,"chooseImages",o.data,null===o||void 0===o?void 0:o.success,null===o||void 0===o?void 0:o.fail)},takePictureAddWatermark:function(o){return s(f,"takePictureAddWatermark",o.data,null===o||void 0===o?void 0:o.success,null===o||void 0===o?void 0:o.fail)}}),g="WorkPlus_Contact";var h=v,y=p,m=Object.freeze({__proto__:null,getSingleContact:function(o){var e;return s(g,"getContact",null!=(e=null===o||void 0===o?void 0:o.data)?e:[],null===o||void 0===o?void 0:o.success,null===o||void 0===o?void 0:o.fail)},getContacts:function(o){var e;return s(g,"getContacts",null!=(e=null===o||void 0===o?void 0:o.data)?e:[],null===o||void 0===o?void 0:o.success,null===o||void 0===o?void 0:o.fail)},getEmployeesFromCurrentOrg:function(o){var e;return s(g,"getEmployeesFromCurrentOrg",null!=(e=null===o||void 0===o?void 0:o.data)?e:[],null===o||void 0===o?void 0:o.success,null===o||void 0===o?void 0:o.fail)},getCurrentUserInfo:function(o){var e;return s(g,"getCurrentUserInfo",null!=(e=null===o||void 0===o?void 0:o.data)?e:[],null===o||void 0===o?void 0:o.success,null===o||void 0===o?void 0:o.fail)},getCurrentEmployeeInfo:function(o){var e;return s(g,"getCurrentEmployeeInfo",null!=(e=null===o||void 0===o?void 0:o.data)?e:[],null===o||void 0===o?void 0:o.success,null===o||void 0===o?void 0:o.fail)},showUserChatViewByUser:function(o){var e;return s(g,"showUserChatViewByUser",null!=(e=null===o||void 0===o?void 0:o.data)?e:[],null===o||void 0===o?void 0:o.success,null===o||void 0===o?void 0:o.fail)},getMobileContacts:function(o){var e;return s(g,"getMobileContacts",null!=(e=null===o||void 0===o?void 0:o.data)?e:[],null===o||void 0===o?void 0:o.success,null===o||void 0===o?void 0:o.fail)},getUserInfoByUserId:function(o){var e;return s(g,"getUserInfoByUserId",null!=(e=null===o||void 0===o?void 0:o.data)?e:[],null===o||void 0===o?void 0:o.success,null===o||void 0===o?void 0:o.fail)},showUserInfoByUsername:function(o){var e;return s(g,"showUserInfoByUsername",null!=(e=null===o||void 0===o?void 0:o.data)?e:[],null===o||void 0===o?void 0:o.success,null===o||void 0===o?void 0:o.fail)},openDiscussionById:function(o){var e;return s(g,"openDiscussionById",null!=(e=null===o||void 0===o?void 0:o.data)?e:[],null===o||void 0===o?void 0:o.success,null===o||void 0===o?void 0:o.fail)},createDiscussionChat:function(o){var e;return s(g,"createDiscussionChat",null!=(e=null===o||void 0===o?void 0:o.data)?e:[],null===o||void 0===o?void 0:o.success,null===o||void 0===o?void 0:o.fail)},showAppChatViewById:function(o){var e;return s(g,"showAppChatView",null!=(e=null===o||void 0===o?void 0:o.data)?e:[],null===o||void 0===o?void 0:o.success,null===o||void 0===o?void 0:o.fail)},searchInApp:function(o){var e;return s(g,"searchInApp",null!=(e=null===o||void 0===o?void 0:o.data)?e:[],null===o||void 0===o?void 0:o.success,null===o||void 0===o?void 0:o.fail)},showAppListById:function(o){var e;return s(g,"showAppListById",null!=(e=null===o||void 0===o?void 0:o.data)?e:[],null===o||void 0===o?void 0:o.success,null===o||void 0===o?void 0:o.fail)},selectContacts:function(o){var e;return s(g,"selectContacts",null!=(e=null===o||void 0===o?void 0:o.data)?e:[],null===o||void 0===o?void 0:o.success,null===o||void 0===o?void 0:o.fail)},selectDiscussionMembers:function(o){var e;return s(g,"selectDiscussionMembers",null!=(e=null===o||void 0===o?void 0:o.data)?e:[],null===o||void 0===o?void 0:o.success,null===o||void 0===o?void 0:o.fail)},selectContactsCache:function(o){var e;return s(g,"selectContactsCache",null!=(e=null===o||void 0===o?void 0:o.data)?e:[],null===o||void 0===o?void 0:o.success,null===o||void 0===o?void 0:o.fail)}}),_=a,w=c,I=s;o.Storage=e,o.contact=m,o.exec=I,o.image=y,o.init=_,o.native={},o.off=function(o,e,n){document.removeEventListener(o,e,n)},o.on=function(o,e,n){document.addEventListener(o,e,n)},o.ready=w,o.utils=h,o.version="0.0.1",Object.defineProperty(o,"__esModule",{value:!0})});
