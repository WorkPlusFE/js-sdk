/*!
 * @w6s/sdk.js v0.0.1
 * (c) 2019 WorkPlusFE
 */
!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((e=e||self).WorkPlus={})}(this,function(e){"use strict";function i(e){return null===e||"object"!=typeof e&&"function"!=typeof e}function l(e){return"[object Object]"===Object.prototype.toString.call(e)}function r(e){return"[object Array]"===Object.prototype.toString.call(e)}function u(e){return"[object Function]"===Object.prototype.toString.call(e)}var n=(Object.defineProperty(t.prototype,"_fullPrefix",{get:function(){return this._prefix+":"},enumerable:!0,configurable:!0}),t.prototype._getFullKey=function(e){return this._fullPrefix+e},t.prototype.get=function(e){var n,t=this._getFullKey(e),o=null!=(n=this._storage.getItem(t))?n:"";if(!this.hasKey(t))throw Error("不存在的 key");return JSON.parse(o)},t.prototype.hasKey=function(e){for(var n,t=this._storage,o=!1,i=0;i<t.length;i++){var l=null!=(n=t.key(i))?n:"";l&&l===e&&(o=!0)}return o},t.prototype.add=function(e,n){var t=this._getFullKey(e),o=n;if(r(n)||l(n))o=JSON.stringify(n);else if(!i(n))throw Error("storage 不支持的数据类型");try{this._storage.setItem(t,o)}catch(e){throw Error("storage 添加失败")}},t.prototype.remove=function(e){var n,t=this._getFullKey(e);null===(n=this._storage)||void 0===n||n.removeItem(t)},t.prototype.clear=function(){var n=this;this.forEach(function(e){return n.remove(e)})},t.prototype.count=function(){for(var e,n=this._storage,t=this._fullPrefix,o=0,i=0;i<n.length;i++)(null!=(e=n.key(i))?e:"").indexOf(t)||o++;return o},t.prototype.forEach=function(e){for(var n,t=this._storage,o=this._fullPrefix,i=0;i<t.length;i++){var l=null!=(n=t.key(i))?n:"";l.indexOf(o)||e(l,this.get(l))}},t);function t(e){var n,t;if(this._prefix="workplus",this._connector=".",!((null===(n=window)||void 0===n?void 0:n.localStorage)&&(null===(t=window)||void 0===t?void 0:t.sessionStorage)))throw Error("当前环境不支持 storage.");this._prefix=e.prefix||this._prefix,this._connector=e.connector||this._connector,this._storage=window[e.type]}var o=Object.freeze({__proto__:null,sleep:function(n){return new Promise(function(e){setTimeout(function(){return e()},n)})},loadScript:function(o){return new Promise(function(e,n){var t=document.createElement("script");t.type="text/javascript",t.src=o,t.addEventListener("load",function(){return e(t)},!1),t.addEventListener("error",function(){return n(t)},!1),document.head.appendChild(t)})},isString:function(e){return"[object String]"===Object.prototype.toString.call(e)},isPrimitive:i,isPlainObject:l,isArray:r,isFunction:u}),s=(d.prototype.init=function(e){return(null===(n=window)||void 0===n?void 0:n.navigator.userAgent.includes("workplus"))?!this._isReady||(console.warn("已注入Cordova，无需重新实例化"),!1):(console.warn("当前非workplus环境，请检查重试"),!1);var n},d.prototype._ready=function(e){var n=this;document.addEventListener("deviceready",function(){n._isReady=!0,console.info("Cordova 注入成功"),e&&e()},!1)},d.sendEvent=function(e,o,i,l,r){return new Promise(function(n,t){cordova.exec(function(e){return l&&u(l)&&l(e),n(e)},function(e){return r&&u(r)&&r(e),t(e)},e,o,i)})},Object.defineProperty(d.prototype,"isReday",{get:function(){return this._isReady},enumerable:!0,configurable:!0}),d);function d(e){this._isReady=!1,this.init(e)&&this._ready()}var v="WorkPlus_Image";var a=Object.freeze({__proto__:null,takePhoto:function(e){var n,t,o,i;return s.sendEvent(v,"takePhoto",null!=(t=null===(n=e)||void 0===n?void 0:n.data)?t:[],null===(o=e)||void 0===o?void 0:o.success,null===(i=e)||void 0===i?void 0:i.fail)},takePhotoWithEdit:function(e){var n,t,o,i;return s.sendEvent(v,"takePhotoWithEdit",null!=(t=null===(n=e)||void 0===n?void 0:n.data)?t:[],null===(o=e)||void 0===o?void 0:o.success,null===(i=e)||void 0===i?void 0:i.fail)},selectImage:function(e){var n,t,o,i;return s.sendEvent(v,"selectImage",null!=(t=null===(n=e)||void 0===n?void 0:n.data)?t:[],null===(o=e)||void 0===o?void 0:o.success,null===(i=e)||void 0===i?void 0:i.fail)},selectImageWithEdit:function(e){var n,t,o,i;return s.sendEvent(v,"selectImageWithEdit",null!=(t=null===(n=e)||void 0===n?void 0:n.data)?t:[],null===(o=e)||void 0===o?void 0:o.success,null===(i=e)||void 0===i?void 0:i.fail)},selectImages:function(e){var n,t;return s.sendEvent(v,"selectImages",[{imageKeys:e.data}],null===(n=e)||void 0===n?void 0:n.success,null===(t=e)||void 0===t?void 0:t.fail)},cleanCompressImage:function(e){var n,t,o,i;return s.sendEvent(v,"cleanCompressImage",null!=(t=null===(n=e)||void 0===n?void 0:n.data)?t:[],null===(o=e)||void 0===o?void 0:o.success,null===(i=e)||void 0===i?void 0:i.fail)},showImages:function(e){var n,t;return s.sendEvent(v,"showImages",e.data,null===(n=e)||void 0===n?void 0:n.success,null===(t=e)||void 0===t?void 0:t.fail)},saveImages:function(e){var n,t;return s.sendEvent(v,"saveImages",e.data,null===(n=e)||void 0===n?void 0:n.success,null===(t=e)||void 0===t?void 0:t.fail)},actionForLongPressImage:function(e){var n,t;return s.sendEvent(v,"actionForLongPressImage",e.data,null===(n=e)||void 0===n?void 0:n.success,null===(t=e)||void 0===t?void 0:t.fail)},takePicture:function(e){var n,t;return s.sendEvent(v,"takePicture",e.data,null===(n=e)||void 0===n?void 0:n.success,null===(t=e)||void 0===t?void 0:t.fail)},chooseImages:function(e){var n,t;return s.sendEvent(v,"chooseImages",e.data,null===(n=e)||void 0===n?void 0:n.success,null===(t=e)||void 0===t?void 0:t.fail)},takePictureAddWatermark:function(e){var n,t;return s.sendEvent(v,"takePictureAddWatermark",e.data,null===(n=e)||void 0===n?void 0:n.success,null===(t=e)||void 0===t?void 0:t.fail)}}),c="WorkPlus_Contact";var f=o,p=a,h=Object.freeze({__proto__:null,getSingleContact:function(e){var n,t,o,i;return s.sendEvent(c,"getContact",null!=(t=null===(n=e)||void 0===n?void 0:n.data)?t:[],null===(o=e)||void 0===o?void 0:o.success,null===(i=e)||void 0===i?void 0:i.fail)},getContacts:function(e){var n,t,o,i;return s.sendEvent(c,"getContacts",null!=(t=null===(n=e)||void 0===n?void 0:n.data)?t:[],null===(o=e)||void 0===o?void 0:o.success,null===(i=e)||void 0===i?void 0:i.fail)},getEmployeesFromCurrentOrg:function(e){var n,t,o,i;return s.sendEvent(c,"getEmployeesFromCurrentOrg",null!=(t=null===(n=e)||void 0===n?void 0:n.data)?t:[],null===(o=e)||void 0===o?void 0:o.success,null===(i=e)||void 0===i?void 0:i.fail)},getCurrentUserInfo:function(e){var n,t,o,i;return s.sendEvent(c,"getCurrentUserInfo",null!=(t=null===(n=e)||void 0===n?void 0:n.data)?t:[],null===(o=e)||void 0===o?void 0:o.success,null===(i=e)||void 0===i?void 0:i.fail)},getCurrentEmployeeInfo:function(e){var n,t,o,i;return s.sendEvent(c,"getCurrentEmployeeInfo",null!=(t=null===(n=e)||void 0===n?void 0:n.data)?t:[],null===(o=e)||void 0===o?void 0:o.success,null===(i=e)||void 0===i?void 0:i.fail)},showUserChatViewByUser:function(e){var n,t,o,i;return s.sendEvent(c,"showUserChatViewByUser",null!=(t=null===(n=e)||void 0===n?void 0:n.data)?t:[],null===(o=e)||void 0===o?void 0:o.success,null===(i=e)||void 0===i?void 0:i.fail)},getMobileContacts:function(e){var n,t,o,i;return s.sendEvent(c,"getMobileContacts",null!=(t=null===(n=e)||void 0===n?void 0:n.data)?t:[],null===(o=e)||void 0===o?void 0:o.success,null===(i=e)||void 0===i?void 0:i.fail)},getUserInfoByUserId:function(e){var n,t,o,i;return s.sendEvent(c,"getUserInfoByUserId",null!=(t=null===(n=e)||void 0===n?void 0:n.data)?t:[],null===(o=e)||void 0===o?void 0:o.success,null===(i=e)||void 0===i?void 0:i.fail)},showUserInfoByUsername:function(e){var n,t,o,i;return s.sendEvent(c,"showUserInfoByUsername",null!=(t=null===(n=e)||void 0===n?void 0:n.data)?t:[],null===(o=e)||void 0===o?void 0:o.success,null===(i=e)||void 0===i?void 0:i.fail)},openDiscussionById:function(e){var n,t,o,i;return s.sendEvent(c,"openDiscussionById",null!=(t=null===(n=e)||void 0===n?void 0:n.data)?t:[],null===(o=e)||void 0===o?void 0:o.success,null===(i=e)||void 0===i?void 0:i.fail)},createDiscussionChat:function(e){var n,t,o,i;return s.sendEvent(c,"createDiscussionChat",null!=(t=null===(n=e)||void 0===n?void 0:n.data)?t:[],null===(o=e)||void 0===o?void 0:o.success,null===(i=e)||void 0===i?void 0:i.fail)},showAppChatViewById:function(e){var n,t,o,i;return s.sendEvent(c,"showAppChatView",null!=(t=null===(n=e)||void 0===n?void 0:n.data)?t:[],null===(o=e)||void 0===o?void 0:o.success,null===(i=e)||void 0===i?void 0:i.fail)},searchInApp:function(e){var n,t,o,i;return s.sendEvent(c,"searchInApp",null!=(t=null===(n=e)||void 0===n?void 0:n.data)?t:[],null===(o=e)||void 0===o?void 0:o.success,null===(i=e)||void 0===i?void 0:i.fail)},showAppListById:function(e){var n,t,o,i;return s.sendEvent(c,"showAppListById",null!=(t=null===(n=e)||void 0===n?void 0:n.data)?t:[],null===(o=e)||void 0===o?void 0:o.success,null===(i=e)||void 0===i?void 0:i.fail)},selectContacts:function(e){var n,t,o,i;return s.sendEvent(c,"selectContacts",null!=(t=null===(n=e)||void 0===n?void 0:n.data)?t:[],null===(o=e)||void 0===o?void 0:o.success,null===(i=e)||void 0===i?void 0:i.fail)},selectDiscussionMembers:function(e){var n,t,o,i;return s.sendEvent(c,"selectDiscussionMembers",null!=(t=null===(n=e)||void 0===n?void 0:n.data)?t:[],null===(o=e)||void 0===o?void 0:o.success,null===(i=e)||void 0===i?void 0:i.fail)},selectContactsCache:function(e){var n,t,o,i;return s.sendEvent(c,"selectContactsCache",null!=(t=null===(n=e)||void 0===n?void 0:n.data)?t:[],null===(o=e)||void 0===o?void 0:o.success,null===(i=e)||void 0===i?void 0:i.fail)}});e.Storage=n,e.contact=h,e.image=p,e.native={},e.off=function(e,n,t){document.removeEventListener(e,n,t)},e.on=function(e,n,t){document.addEventListener(e,n,t)},e.utils=f,e.version="0.0.1",Object.defineProperty(e,"__esModule",{value:!0})});
